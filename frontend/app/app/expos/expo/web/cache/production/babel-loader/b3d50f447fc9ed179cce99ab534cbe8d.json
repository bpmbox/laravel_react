{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import PropTypes from'prop-types';import XDate from'xdate';import React,{Component}from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Animated from\"react-native-web/dist/exports/Animated\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import View from\"react-native-web/dist/exports/View\";import{toMarkingFormat}from\"../../interface\";import styleConstructor from\"../style\";import CalendarContext from'.';import Presenter from\"./Presenter\";var commons=require(\"../commons\");var updateSources=commons.UpdateSources;var TOP_POSITION=65;var CalendarProvider=function(_Component){_inherits(CalendarProvider,_Component);var _super=_createSuper(CalendarProvider);function CalendarProvider(){var _this;_classCallCheck(this,CalendarProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.style=styleConstructor(_this.props.theme);_this.presenter=new Presenter();_this.state={prevDate:_this.props.date||toMarkingFormat(new XDate()),date:_this.props.date||toMarkingFormat(new XDate()),updateSource:updateSources.CALENDAR_INIT,buttonY:new Animated.Value(_this.props.todayBottomMargin?-_this.props.todayBottomMargin:-TOP_POSITION),buttonIcon:_this.presenter.getButtonIcon(_this.props.date,_this.props.showTodayButton),disabled:false,opacity:new Animated.Value(1)};_this.getProviderContextValue=function(){return{setDate:_this.setDate,date:_this.state.date,prevDate:_this.state.prevDate,updateSource:_this.state.updateSource,setDisabled:_this.setDisabled};};_this.setDate=function(date,updateSource){var setDate=_this.presenter.setDate;var updateState=function updateState(buttonIcon){_this.setState({date:date,prevDate:_this.state.date,updateSource:updateSource,buttonIcon:buttonIcon},function(){_this.animateTodayButton(date);});};setDate(_this.props,date,_this.state.date,updateState,updateSource);};_this.setDisabled=function(disabled){var setDisabled=_this.presenter.setDisabled;var _this$props$showToday=_this.props.showTodayButton,showTodayButton=_this$props$showToday===void 0?false:_this$props$showToday;var updateState=function updateState(disabled){_this.setState({disabled:disabled});_this.animateOpacity(disabled);};setDisabled(showTodayButton,disabled,_this.state.disabled,updateState);};_this.onTodayPress=function(){var today=_this.presenter.getTodayDate();_this.setDate(today,updateSources.TODAY_PRESS);};return _this;}_createClass(CalendarProvider,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(prevProps.date!==this.props.date){this.setDate(this.props.date,updateSources.PROP_UPDATE);}}},{key:\"animateTodayButton\",value:function animateTodayButton(date){var _this$presenter=this.presenter,shouldAnimateTodayButton=_this$presenter.shouldAnimateTodayButton,getPositionAnimation=_this$presenter.getPositionAnimation;if(shouldAnimateTodayButton(this.props)){var animationData=getPositionAnimation(date,this.props.todayBottomMargin);Animated.spring(this.state.buttonY,_objectSpread({},animationData)).start();}}},{key:\"animateOpacity\",value:function animateOpacity(disabled){var _this$presenter2=this.presenter,shouldAnimateOpacity=_this$presenter2.shouldAnimateOpacity,getOpacityAnimation=_this$presenter2.getOpacityAnimation;if(shouldAnimateOpacity(this.props)){var animationData=getOpacityAnimation(this.props,disabled);Animated.timing(this.state.opacity,_objectSpread({},animationData)).start();}}},{key:\"renderTodayButton\",value:function renderTodayButton(){var _this$state=this.state,disabled=_this$state.disabled,opacity=_this$state.opacity,buttonY=_this$state.buttonY,buttonIcon=_this$state.buttonIcon;var getTodayFormatted=this.presenter.getTodayFormatted;var today=getTodayFormatted();return React.createElement(Animated.View,{style:[this.style.todayButtonContainer,{transform:[{translateY:buttonY}]}]},React.createElement(TouchableOpacity,{style:[this.style.todayButton,this.props.todayButtonStyle],onPress:this.onTodayPress,disabled:disabled},React.createElement(Animated.Image,{style:[this.style.todayButtonImage,{opacity:opacity}],source:buttonIcon}),React.createElement(Animated.Text,{allowFontScaling:false,style:[this.style.todayButtonText,{opacity:opacity}]},today)));}},{key:\"render\",value:function render(){return React.createElement(CalendarContext.Provider,{value:this.getProviderContextValue()},React.createElement(View,{style:[styles.container,this.props.style]},this.props.children),this.props.showTodayButton&&this.renderTodayButton());}}]);return CalendarProvider;}(Component);CalendarProvider.displayName='CalendarProvider';CalendarProvider.propTypes={date:PropTypes.any.isRequired,onDateChanged:PropTypes.func,onMonthChange:PropTypes.func,showTodayButton:PropTypes.bool,todayBottomMargin:PropTypes.number,todayButtonStyle:PropTypes.oneOfType([PropTypes.object,PropTypes.number,PropTypes.array]),disabledOpacity:PropTypes.number};export default CalendarProvider;var styles=StyleSheet.create({container:{flex:1}});","map":{"version":3,"sources":["/app/node_modules/react-native-calendars/src/expandableCalendar/Context/Provider.js"],"names":["PropTypes","XDate","React","Component","toMarkingFormat","styleConstructor","CalendarContext","Presenter","commons","require","updateSources","UpdateSources","TOP_POSITION","CalendarProvider","style","props","theme","presenter","state","prevDate","date","updateSource","CALENDAR_INIT","buttonY","Animated","Value","todayBottomMargin","buttonIcon","getButtonIcon","showTodayButton","disabled","opacity","getProviderContextValue","setDate","setDisabled","updateState","setState","animateTodayButton","animateOpacity","onTodayPress","today","getTodayDate","TODAY_PRESS","prevProps","PROP_UPDATE","shouldAnimateTodayButton","getPositionAnimation","animationData","spring","start","shouldAnimateOpacity","getOpacityAnimation","timing","getTodayFormatted","todayButtonContainer","transform","translateY","todayButton","todayButtonStyle","todayButtonImage","todayButtonText","styles","container","children","renderTodayButton","displayName","propTypes","any","isRequired","onDateChanged","func","onMonthChange","bool","number","oneOfType","object","array","disabledOpacity","StyleSheet","create","flex"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport React, { Component } from 'react';\nimport { StyleSheet, Animated, TouchableOpacity, View } from 'react-native';\n// @ts-expect-error\nimport { toMarkingFormat } from '../../interface';\nimport styleConstructor from '../style';\nimport CalendarContext from '.';\nimport Presenter from './Presenter';\nconst commons = require('../commons');\nconst updateSources = commons.UpdateSources;\nconst TOP_POSITION = 65;\n/**\n * @description: Calendar context provider component\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nclass CalendarProvider extends Component {\n    static displayName = 'CalendarProvider';\n    static propTypes = {\n        /** Initial date in 'yyyy-MM-dd' format. Default = Date() */\n        date: PropTypes.any.isRequired,\n        /** Callback for date change event */\n        onDateChanged: PropTypes.func,\n        /** Callback for month change event */\n        onMonthChange: PropTypes.func,\n        /** Whether to show the today button */\n        showTodayButton: PropTypes.bool,\n        /** Today button's top position */\n        todayBottomMargin: PropTypes.number,\n        /** Today button's style */\n        todayButtonStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.array]),\n        /** The opacity for the disabled today button (0-1) */\n        disabledOpacity: PropTypes.number\n    };\n    style = styleConstructor(this.props.theme);\n    presenter = new Presenter();\n    state = {\n        prevDate: this.props.date || toMarkingFormat(new XDate()),\n        date: this.props.date || toMarkingFormat(new XDate()),\n        updateSource: updateSources.CALENDAR_INIT,\n        buttonY: new Animated.Value(this.props.todayBottomMargin ? -this.props.todayBottomMargin : -TOP_POSITION),\n        buttonIcon: this.presenter.getButtonIcon(this.props.date, this.props.showTodayButton),\n        disabled: false,\n        opacity: new Animated.Value(1)\n    };\n    componentDidUpdate(prevProps) {\n        if (prevProps.date !== this.props.date) {\n            this.setDate(this.props.date, updateSources.PROP_UPDATE);\n        }\n    }\n    getProviderContextValue = () => {\n        return {\n            setDate: this.setDate,\n            date: this.state.date,\n            prevDate: this.state.prevDate,\n            updateSource: this.state.updateSource,\n            setDisabled: this.setDisabled\n        };\n    };\n    setDate = (date, updateSource) => {\n        const { setDate } = this.presenter;\n        const updateState = (buttonIcon) => {\n            this.setState({ date, prevDate: this.state.date, updateSource, buttonIcon }, () => {\n                this.animateTodayButton(date);\n            });\n        };\n        setDate(this.props, date, this.state.date, updateState, updateSource);\n    };\n    setDisabled = (disabled) => {\n        const { setDisabled } = this.presenter;\n        const { showTodayButton = false } = this.props;\n        const updateState = (disabled) => {\n            this.setState({ disabled });\n            this.animateOpacity(disabled);\n        };\n        setDisabled(showTodayButton, disabled, this.state.disabled, updateState);\n    };\n    animateTodayButton(date) {\n        const { shouldAnimateTodayButton, getPositionAnimation } = this.presenter;\n        if (shouldAnimateTodayButton(this.props)) {\n            const animationData = getPositionAnimation(date, this.props.todayBottomMargin);\n            Animated.spring(this.state.buttonY, {\n                ...animationData\n            }).start();\n        }\n    }\n    animateOpacity(disabled) {\n        const { shouldAnimateOpacity, getOpacityAnimation } = this.presenter;\n        if (shouldAnimateOpacity(this.props)) {\n            const animationData = getOpacityAnimation(this.props, disabled);\n            Animated.timing(this.state.opacity, {\n                ...animationData\n            }).start();\n        }\n    }\n    onTodayPress = () => {\n        const today = this.presenter.getTodayDate();\n        this.setDate(today, updateSources.TODAY_PRESS);\n    };\n    renderTodayButton() {\n        const { disabled, opacity, buttonY, buttonIcon } = this.state;\n        const { getTodayFormatted } = this.presenter;\n        const today = getTodayFormatted();\n        return (<Animated.View style={[this.style.todayButtonContainer, { transform: [{ translateY: buttonY }] }]}>\n        <TouchableOpacity style={[this.style.todayButton, this.props.todayButtonStyle]} onPress={this.onTodayPress} disabled={disabled}>\n          <Animated.Image style={[this.style.todayButtonImage, { opacity }]} source={buttonIcon}/>\n          <Animated.Text allowFontScaling={false} style={[this.style.todayButtonText, { opacity }]}>\n            {today}\n          </Animated.Text>\n        </TouchableOpacity>\n      </Animated.View>);\n    }\n    render() {\n        return (<CalendarContext.Provider value={this.getProviderContextValue()}>\n        <View style={[styles.container, this.props.style]}>{this.props.children}</View>\n        {this.props.showTodayButton && this.renderTodayButton()}\n      </CalendarContext.Provider>);\n    }\n}\nexport default CalendarProvider;\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1\n    }\n});\n"]},"metadata":{},"sourceType":"module"}