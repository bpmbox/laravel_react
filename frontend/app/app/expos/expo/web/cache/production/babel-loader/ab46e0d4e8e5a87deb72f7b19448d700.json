{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _extends from\"@babel/runtime/helpers/extends\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import _ from'lodash';import PropTypes from'prop-types';import XDate from'xdate';import React,{Component}from'react';import FlatList from\"react-native-web/dist/exports/FlatList\";import Platform from\"react-native-web/dist/exports/Platform\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import View from\"react-native-web/dist/exports/View\";import{extractComponentProps}from\"../component-updater\";import{xdateToData,parseDate}from\"../interface\";import{page,sameDate}from\"../dateutils\";import{STATIC_HEADER}from\"../testIDs\";import styleConstructor from\"./style\";import Calendar from\"../calendar\";import CalendarListItem from\"./item\";import CalendarHeader from\"../calendar/header/index\";var _Dimensions$get=Dimensions.get('window'),width=_Dimensions$get.width;var CALENDAR_WIDTH=width;var CALENDAR_HEIGHT=360;var PAST_SCROLL_RANGE=50;var FUTURE_SCROLL_RANGE=50;var CalendarList=function(_Component){_inherits(CalendarList,_Component);var _super=_createSuper(CalendarList);function CalendarList(props){var _this;_classCallCheck(this,CalendarList);_this=_super.call(this,props);_this.list=React.createRef();_this.viewabilityConfig={itemVisiblePercentThreshold:20};_this.scrollToMonth=function(m){var _this$list,_this$list$current;var _this$props=_this.props,horizontal=_this$props.horizontal,_this$props$calendarH=_this$props.calendarHeight,calendarHeight=_this$props$calendarH===void 0?CALENDAR_HEIGHT:_this$props$calendarH,_this$props$calendarW=_this$props.calendarWidth,calendarWidth=_this$props$calendarW===void 0?CALENDAR_WIDTH:_this$props$calendarW,_this$props$pastScrol=_this$props.pastScrollRange,pastScrollRange=_this$props$pastScrol===void 0?PAST_SCROLL_RANGE:_this$props$pastScrol,_this$props$animateSc=_this$props.animateScroll,animateScroll=_this$props$animateSc===void 0?false:_this$props$animateSc;var month=parseDate(m);var scrollTo=month||_this.state.openDate;var diffMonths=Math.round(_this.state.openDate.clone().setDate(1).diffMonths(scrollTo.clone().setDate(1)));var size=horizontal?calendarWidth:calendarHeight;var scrollAmount=size*pastScrollRange+diffMonths*size;(_this$list=_this.list)==null?void 0:(_this$list$current=_this$list.current)==null?void 0:_this$list$current.scrollToOffset({offset:scrollAmount,animated:animateScroll});};_this.getItemLayout=function(_,index){var _this$props2=_this.props,horizontal=_this$props2.horizontal,_this$props2$calendar=_this$props2.calendarHeight,calendarHeight=_this$props2$calendar===void 0?CALENDAR_HEIGHT:_this$props2$calendar,_this$props2$calendar2=_this$props2.calendarWidth,calendarWidth=_this$props2$calendar2===void 0?CALENDAR_WIDTH:_this$props2$calendar2;var size=horizontal?calendarWidth:calendarHeight;return{length:size,offset:size*index,index:index};};_this.addMonth=function(count){_this.updateMonth(_this.state.currentMonth.clone().addMonths(count,true));};_this.onViewableItemsChanged=function(_ref){var viewableItems=_ref.viewableItems;function rowIsCloseToViewable(index,distance){for(var i=0;i<viewableItems.length;i++){if(Math.abs(index-parseInt(viewableItems[i].index))<=distance){return true;}}return false;}var rowclone=_this.state.rows;var newrows=[];var visibleMonths=[];for(var i=0;i<rowclone.length;i++){var val=rowclone[i];var rowShouldBeRendered=rowIsCloseToViewable(i,1);var _this$props$pastScrol2=_this.props.pastScrollRange,pastScrollRange=_this$props$pastScrol2===void 0?PAST_SCROLL_RANGE:_this$props$pastScrol2;if(rowShouldBeRendered&&!rowclone[i].getTime){val=_this.state.openDate.clone().addMonths(i-pastScrollRange,true);}else if(!rowShouldBeRendered){val=_this.state.texts[i];}newrows.push(val);if(rowIsCloseToViewable(i,0)){visibleMonths.push(xdateToData(val));}}_.invoke(_this.props,'onVisibleMonthsChange',visibleMonths);_this.setState({rows:newrows,currentMonth:parseDate(visibleMonths[0])});};_this.renderItem=function(_ref2){var item=_ref2.item;var _this$props3=_this.props,calendarStyle=_this$props3.calendarStyle,horizontal=_this$props3.horizontal,calendarWidth=_this$props3.calendarWidth,testID=_this$props3.testID,others=_objectWithoutProperties(_this$props3,[\"calendarStyle\",\"horizontal\",\"calendarWidth\",\"testID\"]);return React.createElement(CalendarListItem,_extends({},others,{item:item,testID:testID+\"_\"+item,style:calendarStyle,horizontal:horizontal,calendarWidth:horizontal?calendarWidth:undefined,scrollToMonth:_this.scrollToMonth}));};_this.style=styleConstructor(props.theme);var rows=[];var texts=[];var date=parseDate(props.current)||new XDate();var _props$pastScrollRang=props.pastScrollRange,_pastScrollRange=_props$pastScrollRang===void 0?PAST_SCROLL_RANGE:_props$pastScrollRang,_props$futureScrollRa=props.futureScrollRange,futureScrollRange=_props$futureScrollRa===void 0?FUTURE_SCROLL_RANGE:_props$futureScrollRa;for(var i=0;i<=_pastScrollRange+futureScrollRange;i++){var rangeDate=date.clone().addMonths(i-_pastScrollRange,true);var rangeDateStr=rangeDate.toString('MMM yyyy');texts.push(rangeDateStr);if(_pastScrollRange-1<=i&&i<=_pastScrollRange+1||!_pastScrollRange&&i<=_pastScrollRange+2){rows.push(rangeDate);}else{rows.push(rangeDateStr);}}_this.state={rows:rows,texts:texts,openDate:date,currentMonth:parseDate(props.current)};return _this;}_createClass(CalendarList,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var prevCurrent=parseDate(prevProps.current);var current=parseDate(this.props.current);if(current&&prevCurrent&&current.getTime()!==prevCurrent.getTime()){this.scrollToMonth(current);}}},{key:\"scrollToDay\",value:function scrollToDay(d,offset,animated){var _this$list2,_this$list2$current;var _this$props4=this.props,horizontal=_this$props4.horizontal,_this$props4$calendar=_this$props4.calendarHeight,calendarHeight=_this$props4$calendar===void 0?CALENDAR_HEIGHT:_this$props4$calendar,_this$props4$calendar2=_this$props4.calendarWidth,calendarWidth=_this$props4$calendar2===void 0?CALENDAR_WIDTH:_this$props4$calendar2,_this$props4$pastScro=_this$props4.pastScrollRange,pastScrollRange=_this$props4$pastScro===void 0?PAST_SCROLL_RANGE:_this$props4$pastScro,firstDay=_this$props4.firstDay;var day=parseDate(d);var diffMonths=Math.round(this.state.openDate.clone().setDate(1).diffMonths(day.clone().setDate(1)));var size=horizontal?calendarWidth:calendarHeight;var scrollAmount=size*pastScrollRange+diffMonths*size+(offset||0);if(!horizontal){var week=0;var days=page(day,firstDay);for(var i=0;i<days.length;i++){week=Math.floor(i/7);if(sameDate(days[i],day)){scrollAmount+=46*week;break;}}}(_this$list2=this.list)==null?void 0:(_this$list2$current=_this$list2.current)==null?void 0:_this$list2$current.scrollToOffset({offset:scrollAmount,animated:animated});}},{key:\"getMonthIndex\",value:function getMonthIndex(month){var _this$props$pastScrol3=this.props.pastScrollRange,pastScrollRange=_this$props$pastScrol3===void 0?PAST_SCROLL_RANGE:_this$props$pastScrol3;var diffMonths=this.state.openDate.diffMonths(month)+pastScrollRange;return diffMonths;}},{key:\"updateMonth\",value:function updateMonth(day){var _this2=this;var doNotTriggerListeners=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(day.toString('yyyy MM')===this.state.currentMonth.toString('yyyy MM')){return;}this.setState({currentMonth:day.clone()},function(){_this2.scrollToMonth(_this2.state.currentMonth);if(!doNotTriggerListeners){var currMont=_this2.state.currentMonth.clone();_.invoke(_this2.props,'onMonthChange',xdateToData(currMont));_.invoke(_this2.props,'onVisibleMonthsChange',[xdateToData(currMont)]);}});}},{key:\"renderStaticHeader\",value:function renderStaticHeader(){var _this$props5=this.props,staticHeader=_this$props5.staticHeader,horizontal=_this$props5.horizontal,headerStyle=_this$props5.headerStyle;var useStaticHeader=staticHeader&&horizontal;var headerProps=extractComponentProps(CalendarHeader,this.props);if(useStaticHeader){return React.createElement(CalendarHeader,_extends({},headerProps,{testID:STATIC_HEADER,style:[this.style.staticHeader,headerStyle],month:this.state.currentMonth,addMonth:this.addMonth,accessibilityElementsHidden:true,importantForAccessibility:'no-hide-descendants'}));}}},{key:\"render\",value:function render(){var _this$props6=this.props,style=_this$props6.style,pastScrollRange=_this$props6.pastScrollRange,futureScrollRange=_this$props6.futureScrollRange,horizontal=_this$props6.horizontal,showScrollIndicator=_this$props6.showScrollIndicator;return React.createElement(View,{style:this.style.flatListContainer},React.createElement(FlatList,{ref:this.list,style:[this.style.container,style],initialListSize:pastScrollRange+futureScrollRange+1,data:this.state.rows,renderItem:this.renderItem,getItemLayout:this.getItemLayout,onViewableItemsChanged:this.onViewableItemsChanged,viewabilityConfig:this.viewabilityConfig,initialScrollIndex:this.state.openDate?this.getMonthIndex(this.state.openDate):undefined,showsVerticalScrollIndicator:showScrollIndicator,showsHorizontalScrollIndicator:horizontal&&showScrollIndicator,testID:this.props.testID,onLayout:this.props.onLayout,removeClippedSubviews:this.props.removeClippedSubviews,pagingEnabled:this.props.pagingEnabled,scrollEnabled:this.props.scrollEnabled,scrollsToTop:this.props.scrollsToTop,horizontal:this.props.horizontal,keyboardShouldPersistTaps:this.props.keyboardShouldPersistTaps,keyExtractor:this.props.keyExtractor,onEndReachedThreshold:this.props.onEndReachedThreshold,onEndReached:this.props.onEndReached}),this.renderStaticHeader());}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(_,prevState){var rowClone=prevState.rows;var newRows=[];for(var i=0;i<rowClone.length;i++){var val=prevState.texts[i];if(rowClone[i].getTime){val=rowClone[i].clone();val.propBump=rowClone[i].propBump?rowClone[i].propBump+1:1;}newRows.push(val);}return{rows:newRows};}}]);return CalendarList;}(Component);CalendarList.displayName='CalendarList';CalendarList.propTypes=_objectSpread(_objectSpread({},Calendar.propTypes),{},{pastScrollRange:PropTypes.number,futureScrollRange:PropTypes.number,calendarWidth:PropTypes.number,calendarHeight:PropTypes.number,calendarStyle:PropTypes.oneOfType([PropTypes.object,PropTypes.number,PropTypes.array]),staticHeader:PropTypes.bool,showScrollIndicator:PropTypes.bool,animateScroll:PropTypes.bool,scrollEnabled:PropTypes.bool,scrollsToTop:PropTypes.bool,pagingEnabled:PropTypes.bool,horizontal:PropTypes.bool,keyboardShouldPersistTaps:PropTypes.oneOf(['never','always','handled']),keyExtractor:PropTypes.func,onEndReachedThreshold:PropTypes.number,onEndReached:PropTypes.func});CalendarList.defaultProps={calendarWidth:CALENDAR_WIDTH,calendarHeight:CALENDAR_HEIGHT,pastScrollRange:PAST_SCROLL_RANGE,futureScrollRange:FUTURE_SCROLL_RANGE,showScrollIndicator:false,horizontal:false,scrollsToTop:false,scrollEnabled:true,removeClippedSubviews:Platform.OS==='android',keyExtractor:function keyExtractor(_,index){return String(index);}};export default CalendarList;","map":{"version":3,"sources":["/app/node_modules/react-native-calendars/src/calendar-list/index.js"],"names":["_","PropTypes","XDate","React","Component","extractComponentProps","xdateToData","parseDate","page","sameDate","STATIC_HEADER","styleConstructor","Calendar","CalendarListItem","CalendarHeader","Dimensions","get","width","CALENDAR_WIDTH","CALENDAR_HEIGHT","PAST_SCROLL_RANGE","FUTURE_SCROLL_RANGE","CalendarList","props","list","createRef","viewabilityConfig","itemVisiblePercentThreshold","scrollToMonth","m","horizontal","calendarHeight","calendarWidth","pastScrollRange","animateScroll","month","scrollTo","state","openDate","diffMonths","Math","round","clone","setDate","size","scrollAmount","current","scrollToOffset","offset","animated","getItemLayout","index","length","addMonth","count","updateMonth","currentMonth","addMonths","onViewableItemsChanged","viewableItems","rowIsCloseToViewable","distance","i","abs","parseInt","rowclone","rows","newrows","visibleMonths","val","rowShouldBeRendered","getTime","texts","push","invoke","setState","renderItem","item","calendarStyle","testID","others","undefined","style","theme","date","futureScrollRange","rangeDate","rangeDateStr","toString","prevProps","prevCurrent","d","firstDay","day","week","days","floor","doNotTriggerListeners","currMont","staticHeader","headerStyle","useStaticHeader","headerProps","showScrollIndicator","flatListContainer","container","getMonthIndex","onLayout","removeClippedSubviews","pagingEnabled","scrollEnabled","scrollsToTop","keyboardShouldPersistTaps","keyExtractor","onEndReachedThreshold","onEndReached","renderStaticHeader","prevState","rowClone","newRows","propBump","displayName","propTypes","number","oneOfType","object","array","bool","oneOf","func","defaultProps","Platform","OS","String"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport React, { Component } from 'react';\nimport { FlatList, Platform, Dimensions, View } from 'react-native';\n// @ts-expect-error\nimport { extractComponentProps } from '../component-updater';\n// @ts-expect-error\nimport { xdateToData, parseDate } from '../interface';\n// @ts-expect-error\nimport { page, sameDate } from '../dateutils';\n// @ts-expect-error\nimport { STATIC_HEADER } from '../testIDs';\nimport styleConstructor from './style';\nimport Calendar from '../calendar';\nimport CalendarListItem from './item';\nimport CalendarHeader from '../calendar/header/index';\nconst { width } = Dimensions.get('window');\nconst CALENDAR_WIDTH = width;\nconst CALENDAR_HEIGHT = 360;\nconst PAST_SCROLL_RANGE = 50;\nconst FUTURE_SCROLL_RANGE = 50;\n/**\n * @description: Calendar List component for both vertical and horizontal calendars\n * @extends: Calendar\n * @extendslink: docs/Calendar\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/calendarsList.js\n * @gif: https://github.com/wix/react-native-calendars/blob/master/demo/calendar-list.gif\n */\nclass CalendarList extends Component {\n    static displayName = 'CalendarList';\n    static propTypes = {\n        ...Calendar.propTypes,\n        /** Max amount of months allowed to scroll to the past. Default = 50 */\n        pastScrollRange: PropTypes.number,\n        /** Max amount of months allowed to scroll to the future. Default = 50 */\n        futureScrollRange: PropTypes.number,\n        /** Used when calendar scroll is horizontal, default is device width, pagination should be disabled */\n        calendarWidth: PropTypes.number,\n        /** Dynamic calendar height */\n        calendarHeight: PropTypes.number,\n        /** Style for the List item (the calendar) */\n        calendarStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.array]),\n        /** Whether to use static header that will not scroll with the list (horizontal only) */\n        staticHeader: PropTypes.bool,\n        /** Enable or disable vertical / horizontal scroll indicator. Default = false */\n        showScrollIndicator: PropTypes.bool,\n        /** Whether to animate the auto month scroll */\n        animateScroll: PropTypes.bool,\n        /** Enable or disable scrolling of calendar list */\n        scrollEnabled: PropTypes.bool,\n        /** When true, the calendar list scrolls to top when the status bar is tapped. Default = true */\n        scrollsToTop: PropTypes.bool,\n        /** Enable or disable paging on scroll */\n        pagingEnabled: PropTypes.bool,\n        /** Whether the scroll is horizontal */\n        horizontal: PropTypes.bool,\n        /** Should Keyboard persist taps */\n        keyboardShouldPersistTaps: PropTypes.oneOf(['never', 'always', 'handled']),\n        /** A custom key extractor for the generated calendar months */\n        keyExtractor: PropTypes.func,\n        /** How far from the end to trigger the onEndReached callback */\n        onEndReachedThreshold: PropTypes.number,\n        /** Called once when the scroll position gets within onEndReachedThreshold */\n        onEndReached: PropTypes.func\n    };\n    static defaultProps = {\n        calendarWidth: CALENDAR_WIDTH,\n        calendarHeight: CALENDAR_HEIGHT,\n        pastScrollRange: PAST_SCROLL_RANGE,\n        futureScrollRange: FUTURE_SCROLL_RANGE,\n        showScrollIndicator: false,\n        horizontal: false,\n        scrollsToTop: false,\n        scrollEnabled: true,\n        removeClippedSubviews: Platform.OS === 'android',\n        keyExtractor: (_, index) => String(index)\n    };\n    style;\n    list = React.createRef();\n    viewabilityConfig = {\n        itemVisiblePercentThreshold: 20\n    };\n    constructor(props) {\n        super(props);\n        this.style = styleConstructor(props.theme);\n        const rows = [];\n        const texts = [];\n        const date = parseDate(props.current) || new XDate();\n        const { pastScrollRange = PAST_SCROLL_RANGE, futureScrollRange = FUTURE_SCROLL_RANGE } = props;\n        for (let i = 0; i <= pastScrollRange + futureScrollRange; i++) {\n            const rangeDate = date.clone().addMonths(i - pastScrollRange, true);\n            const rangeDateStr = rangeDate.toString('MMM yyyy');\n            texts.push(rangeDateStr);\n            /*\n             * This selects range around current shown month [-0, +2] or [-1, +1] month for detail calendar rendering.\n             * If `this.pastScrollRange` is `undefined` it's equal to `false` or 0 in next condition.\n             */\n            if ((pastScrollRange - 1 <= i && i <= pastScrollRange + 1) ||\n                (!pastScrollRange && i <= pastScrollRange + 2)) {\n                rows.push(rangeDate);\n            }\n            else {\n                rows.push(rangeDateStr);\n            }\n        }\n        this.state = {\n            rows,\n            texts,\n            openDate: date,\n            currentMonth: parseDate(props.current)\n        };\n    }\n    componentDidUpdate(prevProps) {\n        const prevCurrent = parseDate(prevProps.current);\n        const current = parseDate(this.props.current);\n        if (current && prevCurrent && current.getTime() !== prevCurrent.getTime()) {\n            this.scrollToMonth(current);\n        }\n    }\n    static getDerivedStateFromProps(_, prevState) {\n        const rowClone = prevState.rows;\n        const newRows = [];\n        for (let i = 0; i < rowClone.length; i++) {\n            let val = prevState.texts[i];\n            // @ts-ignore\n            if (rowClone[i].getTime) {\n                val = rowClone[i].clone();\n                // @ts-ignore\n                val.propBump = rowClone[i].propBump ? rowClone[i].propBump + 1 : 1;\n            }\n            newRows.push(val);\n        }\n        return { rows: newRows };\n    }\n    scrollToDay(d, offset, animated) {\n        const { horizontal, calendarHeight = CALENDAR_HEIGHT, calendarWidth = CALENDAR_WIDTH, pastScrollRange = PAST_SCROLL_RANGE, firstDay } = this.props;\n        const day = parseDate(d);\n        const diffMonths = Math.round(this.state.openDate.clone().setDate(1).diffMonths(day.clone().setDate(1)));\n        const size = horizontal ? calendarWidth : calendarHeight;\n        let scrollAmount = size * pastScrollRange + diffMonths * size + (offset || 0);\n        if (!horizontal) {\n            let week = 0;\n            const days = page(day, firstDay);\n            for (let i = 0; i < days.length; i++) {\n                week = Math.floor(i / 7);\n                if (sameDate(days[i], day)) {\n                    scrollAmount += 46 * week;\n                    break;\n                }\n            }\n        }\n        this.list?.current?.scrollToOffset({ offset: scrollAmount, animated });\n    }\n    scrollToMonth = (m) => {\n        const { horizontal, calendarHeight = CALENDAR_HEIGHT, calendarWidth = CALENDAR_WIDTH, pastScrollRange = PAST_SCROLL_RANGE, animateScroll = false } = this.props;\n        const month = parseDate(m);\n        const scrollTo = month || this.state.openDate;\n        let diffMonths = Math.round(this.state.openDate.clone().setDate(1).diffMonths(scrollTo.clone().setDate(1)));\n        const size = horizontal ? calendarWidth : calendarHeight;\n        const scrollAmount = size * pastScrollRange + diffMonths * size;\n        this.list?.current?.scrollToOffset({ offset: scrollAmount, animated: animateScroll });\n    };\n    getItemLayout = (_, index) => {\n        const { horizontal, calendarHeight = CALENDAR_HEIGHT, calendarWidth = CALENDAR_WIDTH } = this.props;\n        const size = horizontal ? calendarWidth : calendarHeight;\n        return {\n            length: size,\n            offset: size * index,\n            index\n        };\n    };\n    getMonthIndex(month) {\n        const { pastScrollRange = PAST_SCROLL_RANGE } = this.props;\n        let diffMonths = this.state.openDate.diffMonths(month) + pastScrollRange;\n        return diffMonths;\n    }\n    addMonth = (count) => {\n        this.updateMonth(this.state.currentMonth.clone().addMonths(count, true));\n    };\n    updateMonth(day, doNotTriggerListeners = false) {\n        if (day.toString('yyyy MM') === this.state.currentMonth.toString('yyyy MM')) {\n            return;\n        }\n        this.setState({ currentMonth: day.clone() }, () => {\n            this.scrollToMonth(this.state.currentMonth);\n            if (!doNotTriggerListeners) {\n                const currMont = this.state.currentMonth.clone();\n                _.invoke(this.props, 'onMonthChange', xdateToData(currMont));\n                _.invoke(this.props, 'onVisibleMonthsChange', [xdateToData(currMont)]);\n            }\n        });\n    }\n    onViewableItemsChanged = ({ viewableItems }) => {\n        function rowIsCloseToViewable(index, distance) {\n            for (let i = 0; i < viewableItems.length; i++) {\n                if (Math.abs(index - parseInt(viewableItems[i].index)) <= distance) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        const rowclone = this.state.rows;\n        const newrows = [];\n        const visibleMonths = [];\n        for (let i = 0; i < rowclone.length; i++) {\n            let val = rowclone[i];\n            const rowShouldBeRendered = rowIsCloseToViewable(i, 1);\n            const { pastScrollRange = PAST_SCROLL_RANGE } = this.props;\n            if (rowShouldBeRendered && !rowclone[i].getTime) {\n                val = this.state.openDate.clone().addMonths(i - pastScrollRange, true);\n            }\n            else if (!rowShouldBeRendered) {\n                val = this.state.texts[i];\n            }\n            newrows.push(val);\n            if (rowIsCloseToViewable(i, 0)) {\n                visibleMonths.push(xdateToData(val));\n            }\n        }\n        _.invoke(this.props, 'onVisibleMonthsChange', visibleMonths);\n        this.setState({\n            // @ts-ignore\n            rows: newrows,\n            currentMonth: parseDate(visibleMonths[0])\n        });\n    };\n    renderItem = ({ item }) => {\n        const { calendarStyle, horizontal, calendarWidth, testID, ...others } = this.props;\n        return (<CalendarListItem {...others} item={item} testID={`${testID}_${item}`} style={calendarStyle} horizontal={horizontal} calendarWidth={horizontal ? calendarWidth : undefined} scrollToMonth={this.scrollToMonth}/>);\n    };\n    renderStaticHeader() {\n        const { staticHeader, horizontal, headerStyle } = this.props;\n        const useStaticHeader = staticHeader && horizontal;\n        const headerProps = extractComponentProps(CalendarHeader, this.props);\n        if (useStaticHeader) {\n            return (<CalendarHeader {...headerProps} testID={STATIC_HEADER} style={[this.style.staticHeader, headerStyle]} month={this.state.currentMonth} addMonth={this.addMonth} accessibilityElementsHidden={true} // iOS\n             importantForAccessibility={'no-hide-descendants'} // Android\n            />);\n        }\n    }\n    render() {\n        const { style, pastScrollRange, futureScrollRange, horizontal, showScrollIndicator } = this.props;\n        return (<View style={this.style.flatListContainer}>\n        <FlatList ref={this.list} style={[this.style.container, style]} \n        // @ts-ignore\n        initialListSize={pastScrollRange + futureScrollRange + 1} // ListView deprecated\n         data={this.state.rows} renderItem={this.renderItem} getItemLayout={this.getItemLayout} onViewableItemsChanged={this.onViewableItemsChanged} viewabilityConfig={this.viewabilityConfig} initialScrollIndex={this.state.openDate ? this.getMonthIndex(this.state.openDate) : undefined} showsVerticalScrollIndicator={showScrollIndicator} showsHorizontalScrollIndicator={horizontal && showScrollIndicator} testID={this.props.testID} onLayout={this.props.onLayout} removeClippedSubviews={this.props.removeClippedSubviews} pagingEnabled={this.props.pagingEnabled} scrollEnabled={this.props.scrollEnabled} scrollsToTop={this.props.scrollsToTop} horizontal={this.props.horizontal} keyboardShouldPersistTaps={this.props.keyboardShouldPersistTaps} keyExtractor={this.props.keyExtractor} onEndReachedThreshold={this.props.onEndReachedThreshold} onEndReached={this.props.onEndReached}/>\n        {this.renderStaticHeader()}\n      </View>);\n    }\n}\nexport default CalendarList;\n"]},"metadata":{},"sourceType":"module"}