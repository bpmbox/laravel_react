{"ast":null,"code":"\"use strict\";var _defineProperty=require(\"@babel/runtime/helpers/defineProperty\");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}Object.defineProperty(exports,\"__esModule\",{value:true});exports.collapseTopMarginForChild=collapseTopMarginForChild;exports.default=exports.tchildrenRendererDefaultProps=void 0;var _react=_interopRequireDefault(require(\"react\"));var _TNodeRenderer=_interopRequireDefault(require(\"./TNodeRenderer\"));var _getCollapsedMarginTop=_interopRequireDefault(require(\"./helpers/getCollapsedMarginTop\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function isCollapsible(tnode){return tnode.type==='block'||tnode.type==='phrasing';}function collapseTopMarginForChild(n,tchildren){var childTnode=tchildren[n];if(isCollapsible(childTnode)&&n>0&&isCollapsible(tchildren[n-1])){return(0,_getCollapsedMarginTop.default)(tchildren[n-1],childTnode);}return null;}var mapCollapsibleChildren=function mapCollapsibleChildren(propsForChildren,renderChild,disableMarginCollapsing,childTnode,n,tchildren){var collapsedMarginTop=disableMarginCollapsing?null:collapseTopMarginForChild(n,tchildren);var propsFromParent=_objectSpread(_objectSpread({},propsForChildren),{},{collapsedMarginTop:collapsedMarginTop});var key=childTnode.nodeIndex;var childElement=_react.default.createElement(_TNodeRenderer.default,{propsFromParent:propsFromParent,tnode:childTnode,key:key});return typeof renderChild==='function'?renderChild({key:key,childElement:childElement,index:n,childTnode:childTnode,propsFromParent:propsFromParent}):childElement;};function TChildrenRenderer(_ref){var tchildren=_ref.tchildren,propsForChildren=_ref.propsForChildren,disableMarginCollapsing=_ref.disableMarginCollapsing,renderChild=_ref.renderChild;var elements=tchildren.map(mapCollapsibleChildren.bind(null,propsForChildren,renderChild,disableMarginCollapsing));return _react.default.createElement(_react.default.Fragment,null,elements);}var tchildrenRendererDefaultProps={propsForChildren:{}};exports.tchildrenRendererDefaultProps=tchildrenRendererDefaultProps;TChildrenRenderer.defaultProps=tchildrenRendererDefaultProps;var _default=TChildrenRenderer;exports.default=_default;","map":{"version":3,"sources":["TChildrenRenderer.tsx"],"names":["tnode","childTnode","tchildren","isCollapsible","n","mapCollapsibleChildren","collapsedMarginTop","disableMarginCollapsing","collapseTopMarginForChild","propsFromParent","key","childElement","TNodeRenderer","renderChild","index","elements","tchildrenRendererDefaultProps","propsForChildren","TChildrenRenderer"],"mappings":"kiCAAA,GAAA,CAAA,MAAA,CAAA,sBAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA,CAEA,GAAA,CAAA,cAAA,CAAA,sBAAA,CAAA,OAAA,mBAAA,CAAA,CAEA,GAAA,CAAA,sBAAA,CAAA,sBAAA,CAAA,OAAA,mCAAA,CAAA,C,mFAEA,QAAA,CAAA,aAAA,CAAA,KAAA,CAAqC,CACnC,MAAOA,CAAAA,KAAK,CAALA,IAAAA,GAAAA,OAAAA,EAA0BA,KAAK,CAALA,IAAAA,GAAjC,UAAA,CACD,CAWM,QAAA,CAAA,yBAAA,CAAA,CAAA,CAAA,SAAA,CAGU,CACf,GAAMC,CAAAA,UAAU,CAAGC,SAAS,CAA5B,CAA4B,CAA5B,CACA,GAAIC,aAAa,CAAbA,UAAa,CAAbA,EAA6BC,CAAC,CAA9BD,CAAAA,EAAsCA,aAAa,CAACD,SAAS,CAACE,CAAC,CAAnE,CAAiE,CAAV,CAAvD,CAA2E,CACzE,MAAO,CAAA,EAAA,sBAAA,CAAA,OAAA,EAAsBF,SAAS,CAACE,CAAC,CAAjC,CAA+B,CAA/B,CAAP,UAAO,CAAP,CACD,CACD,MAAA,KAAA,CACD,CAED,GAAMC,CAAAA,sBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,CAAA,gBAAA,CAAA,WAAA,CAAA,uBAAA,CAAA,UAAA,CAAA,CAAA,CAAA,SAAA,CAO1B,CACH,GAAMC,CAAAA,kBAAkB,CAAGC,uBAAuB,CAAA,IAAA,CAE9CC,yBAAyB,CAAA,CAAA,CAF7B,SAE6B,CAF7B,CAGA,GAAMC,CAAAA,eAAe,gCAAG,gBAAH,MAA0BH,kBAAAA,CAAAA,kBAA1B,EAArB,CACA,GAAMI,CAAAA,GAAG,CAAGT,UAAU,CAAtB,SAAA,CACA,GAAMU,CAAAA,YAAY,CAAG,MAAA,CAAA,OAAA,CAAA,aAAA,CAAoBC,cAAAA,CAApB,OAAA,CAAmC,CACtDH,eADsD,CACtDA,eADsD,CAEtDT,KAAK,CAFiD,UAAA,CAGtDU,GAAAA,CAAAA,GAHsD,CAAnC,CAArB,CAKA,MAAO,OAAA,CAAA,WAAA,GAAA,UAAA,CACHG,WAAW,CAAC,CACVH,GADU,CACVA,GADU,CAEVC,YAFU,CAEVA,YAFU,CAGVG,KAAK,CAHK,CAAA,CAIVb,UAJU,CAIVA,UAJU,CAKVQ,eAAAA,CAAAA,eALU,CAAD,CADR,CAAP,YAAA,CAlBF,CAAA,CAiCA,QAAA,CAAA,iBAAA,MAKyC,IALd,CAAA,SAKc,MALd,SAKc,CALd,gBAKc,MALd,gBAKc,CALd,uBAKc,MALd,uBAKc,CADvCI,WACuC,MADvCA,WACuC,CACvC,GAAME,CAAAA,QAAQ,CAAGb,SAAS,CAATA,GAAAA,CACfG,sBAAsB,CAAtBA,IAAAA,CAAAA,IAAAA,CAAAA,gBAAAA,CAAAA,WAAAA,CADF,uBACEA,CADeH,CAAjB,CAQA,MAAO,CAAA,MAAA,CAAA,OAAA,CAAA,aAAA,CAAA,MAAA,CAAA,OAAA,CAAA,QAAA,CAAA,IAAA,CAAP,QAAO,CAAP,CACD,CAEM,GAAMc,CAAAA,6BAGZ,CAAG,CACFC,gBAAgB,CAAE,EADhB,CAHG,C,oEAUPC,iBAAiB,CAAjBA,YAAAA,CAAAA,6BAAAA,C,aAEeA,iB","sourcesContent":["import React, { ReactElement } from 'react';\nimport { TNode } from '@native-html/transient-render-engine';\nimport TNodeRenderer from './TNodeRenderer';\nimport { TChildrenRendererProps } from './shared-types';\nimport getCollapsedMarginTop from './helpers/getCollapsedMarginTop';\n\nfunction isCollapsible(tnode: TNode) {\n  return tnode.type === 'block' || tnode.type === 'phrasing';\n}\n\n/**\n * Compute top collapsed margin for the nth {@link TNode}-child of a list of\n * TNodes.\n *\n * @param n - The index for which the top margin should be collapsed.\n * @param tchildren - The list of {@link TNode} children.\n * @returns `null` when no margin collapsing should apply, a number otherwise.\n * @public\n */\nexport function collapseTopMarginForChild(\n  n: number,\n  tchildren: readonly TNode[]\n): number | null {\n  const childTnode = tchildren[n];\n  if (isCollapsible(childTnode) && n > 0 && isCollapsible(tchildren[n - 1])) {\n    return getCollapsedMarginTop(tchildren[n - 1], childTnode);\n  }\n  return null;\n}\n\nconst mapCollapsibleChildren = (\n  propsForChildren: TChildrenRendererProps['propsForChildren'],\n  renderChild: TChildrenRendererProps['renderChild'],\n  disableMarginCollapsing: boolean | undefined,\n  childTnode: TNode,\n  n: number,\n  tchildren: readonly TNode[]\n) => {\n  const collapsedMarginTop = disableMarginCollapsing\n    ? null\n    : collapseTopMarginForChild(n, tchildren);\n  const propsFromParent = { ...propsForChildren, collapsedMarginTop };\n  const key = childTnode.nodeIndex;\n  const childElement = React.createElement(TNodeRenderer, {\n    propsFromParent,\n    tnode: childTnode,\n    key\n  });\n  return typeof renderChild === 'function'\n    ? renderChild({\n        key,\n        childElement,\n        index: n,\n        childTnode,\n        propsFromParent\n      })\n    : childElement;\n};\n\n/**\n * A component to render collections of tnodes.\n * Especially useful when used with {@link useTNodeChildrenProps}.\n */\nfunction TChildrenRenderer({\n  tchildren,\n  propsForChildren,\n  disableMarginCollapsing,\n  renderChild\n}: TChildrenRendererProps): ReactElement {\n  const elements = tchildren.map(\n    mapCollapsibleChildren.bind(\n      null,\n      propsForChildren,\n      renderChild,\n      disableMarginCollapsing\n    )\n  );\n  return <>{elements}</>;\n}\n\nexport const tchildrenRendererDefaultProps: Pick<\n  TChildrenRendererProps,\n  'propsForChildren'\n> = {\n  propsForChildren: {}\n};\n\n/**\n * @ignore\n */\nTChildrenRenderer.defaultProps = tchildrenRendererDefaultProps;\n\nexport default TChildrenRenderer;\n"]},"metadata":{},"sourceType":"script"}