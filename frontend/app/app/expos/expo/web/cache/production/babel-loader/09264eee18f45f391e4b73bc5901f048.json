{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _extends from\"@babel/runtime/helpers/extends\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import _ from'lodash';import PropTypes from'prop-types';import memoize from'memoize-one';import XDate from'xdate';import React,{Component}from'react';import AccessibilityInfo from\"react-native-web/dist/exports/AccessibilityInfo\";import PanResponder from\"react-native-web/dist/exports/PanResponder\";import Animated from\"react-native-web/dist/exports/Animated\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import Image from\"react-native-web/dist/exports/Image\";import{CALENDAR_KNOB}from\"../testIDs\";import{page,weekDayNames}from\"../dateutils\";import{parseDate,toMarkingFormat}from\"../interface\";import styleConstructor,{HEADER_HEIGHT}from\"./style\";import CalendarList from\"../calendar-list\";import Calendar from\"../calendar\";import asCalendarConsumer from\"./asCalendarConsumer\";import WeekCalendar from\"./WeekCalendar\";import Week from\"./week\";var commons=require(\"./commons\");var updateSources=commons.UpdateSources;var Positions;(function(Positions){Positions[\"CLOSED\"]=\"closed\";Positions[\"OPEN\"]=\"open\";})(Positions||(Positions={}));var SPEED=20;var BOUNCINESS=6;var CLOSED_HEIGHT=120;var WEEK_HEIGHT=46;var KNOB_CONTAINER_HEIGHT=20;var DAY_NAMES_PADDING=24;var PAN_GESTURE_THRESHOLD=30;var LEFT_ARROW=require(\"../calendar/img/previous.png\");var RIGHT_ARROW=require(\"../calendar/img/next.png\");var ExpandableCalendar=function(_Component){_inherits(ExpandableCalendar,_Component);var _super=_createSuper(ExpandableCalendar);function ExpandableCalendar(props){var _this;_classCallCheck(this,ExpandableCalendar);_this=_super.call(this,props);_this.style=styleConstructor(_this.props.theme);_this.header=React.createRef();_this.wrapper=React.createRef();_this.calendar=React.createRef();_this.weekCalendar=React.createRef();_this.handleScreenReaderStatus=function(screenReaderEnabled){_this.setState({screenReaderEnabled:screenReaderEnabled});};_this.handleMoveShouldSetPanResponder=function(_,gestureState){if(_this.props.disablePan){return false;}if(!_this.props.horizontal&&_this.state.position===Positions.OPEN){return false;}if(_this.state.position===Positions.CLOSED&&gestureState.dy<0){return false;}return gestureState.dy>5||gestureState.dy<-5;};_this.handlePanResponderGrant=function(){};_this.handlePanResponderMove=function(_,gestureState){_this._wrapperStyles.style.height=Math.max(_this.closedHeight,_this._height+gestureState.dy);if(!_this.props.horizontal){_this._headerStyles.style.top=Math.min(Math.max(-gestureState.dy,-HEADER_HEIGHT),0);}else{if(_this.state.position===Positions.CLOSED){_this._weekCalendarStyles.style.opacity=Math.min(1,Math.max(1-gestureState.dy/100,0));}}_this.updateNativeStyles();};_this.handlePanResponderEnd=function(){_this._height=Number(_this._wrapperStyles.style.height);_this.bounceToPosition();};_this.onAnimatedFinished=function(result){if(result!=null&&result.finished){}};_this.onPressArrowLeft=function(){_.invoke(_this.props,'onPressArrowLeft');_this.scrollPage(false);};_this.onPressArrowRight=function(){_.invoke(_this.props,'onPressArrowRight');_this.scrollPage(true);};_this.onDayPress=function(value){_.invoke(_this.props.context,'setDate',value.dateString,updateSources.DAY_PRESS);setTimeout(function(){if(_this.state.position===Positions.OPEN){_this.bounceToPosition(_this.closedHeight);}},0);if(_this.props.onDayPress){_this.props.onDayPress(value);}};_this.onVisibleMonthsChange=function(value){var _$first;if(_this.visibleMonth!==((_$first=_.first(value))==null?void 0:_$first.month)){var _$first2;_this.visibleMonth=(_$first2=_.first(value))==null?void 0:_$first2.month;var _this$props$context=_this.props.context,date=_this$props$context.date,updateSource=_this$props$context.updateSource;if(_this.visibleMonth!==_this.getMonth(date)&&updateSource!==updateSources.DAY_PRESS){var next=_this.isLaterDate(_.first(value),date);_this.scrollPage(next);}setTimeout(function(){var numberOfWeeks=_this.getNumberOfWeeksInMonth(parseDate(_this.props.context.date));if(numberOfWeeks!==_this.numberOfWeeks){_this.numberOfWeeks=numberOfWeeks;_this.openHeight=_this.getOpenHeight();if(_this.state.position===Positions.OPEN){_this.bounceToPosition(_this.openHeight);}}},0);}};_this.getWeekDaysStyle=memoize(function(calendarStyle){return[_this.style.weekDayNames,{paddingLeft:(calendarStyle==null?void 0:calendarStyle.paddingLeft)+6||DAY_NAMES_PADDING,paddingRight:(calendarStyle==null?void 0:calendarStyle.paddingRight)+6||DAY_NAMES_PADDING}];});_this.renderWeekDaysNames=memoize(function(weekDaysNames,calendarStyle){return React.createElement(View,{style:_this.getWeekDaysStyle(calendarStyle)},weekDaysNames.map(function(day,index){return React.createElement(Text,{allowFontScaling:false,key:day+index,style:_this.style.weekday,numberOfLines:1},day);}));});_this.renderArrow=function(direction){var _this$props=_this.props,renderArrow=_this$props.renderArrow,_this$props$rightArro=_this$props.rightArrowImageSource,rightArrowImageSource=_this$props$rightArro===void 0?RIGHT_ARROW:_this$props$rightArro,_this$props$leftArrow=_this$props.leftArrowImageSource,leftArrowImageSource=_this$props$leftArrow===void 0?LEFT_ARROW:_this$props$leftArrow,testID=_this$props.testID;if(_.isFunction(renderArrow)){return renderArrow(direction);}return React.createElement(Image,{source:direction==='right'?rightArrowImageSource:leftArrowImageSource,style:_this.style.arrowImage,testID:testID+\"-\"+direction+\"-arrow\"});};_this.closedHeight=CLOSED_HEIGHT+(props.hideKnob?0:KNOB_CONTAINER_HEIGHT);_this.numberOfWeeks=_this.getNumberOfWeeksInMonth(new XDate(_this.props.context.date));_this.openHeight=_this.getOpenHeight();var startHeight=props.initialPosition===Positions.CLOSED?_this.closedHeight:_this.openHeight;_this._height=startHeight;_this._wrapperStyles={style:{height:startHeight}};_this._headerStyles={style:{top:props.initialPosition===Positions.CLOSED?0:-HEADER_HEIGHT}};_this._weekCalendarStyles={style:{}};_this.visibleMonth=_this.getMonth(_this.props.context.date);_this.initialDate=new XDate(props.context.date);_this.headerStyleOverride={stylesheet:{calendar:{header:{week:{marginTop:7,marginBottom:-4,flexDirection:'row',justifyContent:'space-around'}}}}};_this.state={deltaY:new Animated.Value(startHeight),headerDeltaY:new Animated.Value(props.initialPosition===Positions.CLOSED?0:-HEADER_HEIGHT),position:props.initialPosition||Positions.CLOSED,screenReaderEnabled:false};_this.panResponder=PanResponder.create({onMoveShouldSetPanResponder:_this.handleMoveShouldSetPanResponder,onPanResponderGrant:_this.handlePanResponderGrant,onPanResponderMove:_this.handlePanResponderMove,onPanResponderRelease:_this.handlePanResponderEnd,onPanResponderTerminate:_this.handlePanResponderEnd});return _this;}_createClass(ExpandableCalendar,[{key:\"componentDidMount\",value:function componentDidMount(){if(AccessibilityInfo){if(AccessibilityInfo.isScreenReaderEnabled){AccessibilityInfo.isScreenReaderEnabled().then(this.handleScreenReaderStatus);}else if(AccessibilityInfo.fetch){AccessibilityInfo.fetch().then(this.handleScreenReaderStatus);}}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var date=this.props.context.date;if(date!==prevProps.context.date){this.scrollToDate(date);}}},{key:\"updateNativeStyles\",value:function updateNativeStyles(){var _this$wrapper,_this$wrapper$current;(_this$wrapper=this.wrapper)==null?void 0:(_this$wrapper$current=_this$wrapper.current)==null?void 0:_this$wrapper$current.setNativeProps(this._wrapperStyles);if(!this.props.horizontal){var _this$header,_this$header$current;(_this$header=this.header)==null?void 0:(_this$header$current=_this$header.current)==null?void 0:_this$header$current.setNativeProps(this._headerStyles);}else{var _this$weekCalendar,_this$weekCalendar$cu;(_this$weekCalendar=this.weekCalendar)==null?void 0:(_this$weekCalendar$cu=_this$weekCalendar.current)==null?void 0:_this$weekCalendar$cu.setNativeProps(this._weekCalendarStyles);}}},{key:\"scrollToDate\",value:function scrollToDate(date){if(!this.props.horizontal){var _this$calendar,_this$calendar$curren;(_this$calendar=this.calendar)==null?void 0:(_this$calendar$curren=_this$calendar.current)==null?void 0:_this$calendar$curren.scrollToDay(new XDate(date),0,true);}else if(this.getMonth(date)!==this.visibleMonth){var _this$calendar2,_this$calendar2$curre;(_this$calendar2=this.calendar)==null?void 0:(_this$calendar2$curre=_this$calendar2.current)==null?void 0:_this$calendar2$curre.scrollToMonth(new XDate(date));}}},{key:\"scrollPage\",value:function scrollPage(next){if(this.props.horizontal){var d=parseDate(this.props.context.date);if(this.state.position===Positions.OPEN){d.setDate(1);d.addMonths(next?1:-1);}else{var _this$props$firstDay=this.props.firstDay,firstDay=_this$props$firstDay===void 0?0:_this$props$firstDay;var dayOfTheWeek=d.getDay();if(dayOfTheWeek<firstDay&&firstDay>0){dayOfTheWeek=7+dayOfTheWeek;}var firstDayOfWeek=(next?7:-7)-dayOfTheWeek+firstDay;d.addDays(firstDayOfWeek);}_.invoke(this.props.context,'setDate',toMarkingFormat(d),updateSources.PAGE_SCROLL);}}},{key:\"getOpenHeight\",value:function getOpenHeight(){if(!this.props.horizontal){return Math.max(commons.screenHeight,commons.screenWidth);}return CLOSED_HEIGHT+WEEK_HEIGHT*(this.numberOfWeeks-1)+(this.props.hideKnob?12:KNOB_CONTAINER_HEIGHT);}},{key:\"getYear\",value:function getYear(date){var d=new XDate(date);return d.getFullYear();}},{key:\"getMonth\",value:function getMonth(date){var d=new XDate(date);return d.getMonth()+1;}},{key:\"getNumberOfWeeksInMonth\",value:function getNumberOfWeeksInMonth(month){var days=page(month,this.props.firstDay);return days.length/7;}},{key:\"shouldHideArrows\",value:function shouldHideArrows(){if(!this.props.horizontal){return true;}return this.props.hideArrows||false;}},{key:\"isLaterDate\",value:function isLaterDate(date1,date2){if(date1&&date2){if(date1.year>this.getYear(date2)){return true;}if(date1.year===this.getYear(date2)){if(date1.month>this.getMonth(date2)){return true;}}}return false;}},{key:\"bounceToPosition\",value:function bounceToPosition(){var toValue=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(!this.props.disablePan){var _this$state=this.state,deltaY=_this$state.deltaY,position=_this$state.position;var _this$props2=this.props,_this$props2$openThre=_this$props2.openThreshold,openThreshold=_this$props2$openThre===void 0?PAN_GESTURE_THRESHOLD:_this$props2$openThre,_this$props2$closeThr=_this$props2.closeThreshold,closeThreshold=_this$props2$closeThr===void 0?PAN_GESTURE_THRESHOLD:_this$props2$closeThr;var threshold=position===Positions.OPEN?this.openHeight-closeThreshold:this.closedHeight+openThreshold;var isOpen=this._height>=threshold;var newValue=isOpen?this.openHeight:this.closedHeight;deltaY.setValue(this._height);this._height=toValue||newValue;isOpen=this._height>=threshold;Animated.spring(deltaY,{toValue:this._height,speed:SPEED,bounciness:BOUNCINESS,useNativeDriver:false}).start(this.onAnimatedFinished);_.invoke(this.props,'onCalendarToggled',isOpen);this.setPosition();this.closeHeader(isOpen);this.resetWeekCalendarOpacity(isOpen);}}},{key:\"setPosition\",value:function setPosition(){var isClosed=this._height===this.closedHeight;this.setState({position:isClosed?Positions.CLOSED:Positions.OPEN});}},{key:\"resetWeekCalendarOpacity\",value:function resetWeekCalendarOpacity(isOpen){this._weekCalendarStyles.style.opacity=isOpen?0:1;this.updateNativeStyles();}},{key:\"closeHeader\",value:function closeHeader(isOpen){var headerDeltaY=this.state.headerDeltaY;headerDeltaY.setValue(Number(this._headerStyles.style.top));if(!this.props.horizontal&&!isOpen){Animated.spring(headerDeltaY,{toValue:0,speed:SPEED/10,bounciness:1,useNativeDriver:false}).start();}}},{key:\"renderHeader\",value:function renderHeader(){var monthYear=new XDate(this.props.context.date).toString('MMMM yyyy');var weekDaysNames=weekDayNames(this.props.firstDay);return React.createElement(Animated.View,{ref:this.header,style:[this.style.header,{height:HEADER_HEIGHT,top:this.state.headerDeltaY}],pointerEvents:'none'},React.createElement(Text,{allowFontScaling:false,style:this.style.headerTitle},monthYear),this.renderWeekDaysNames(weekDaysNames,this.props.calendarStyle));}},{key:\"renderWeekCalendar\",value:function renderWeekCalendar(){var position=this.state.position;var disableWeekScroll=this.props.disableWeekScroll;var WeekComponent=disableWeekScroll?Week:WeekCalendar;var weekCalendarProps=disableWeekScroll?undefined:{allowShadow:false};return React.createElement(Animated.View,{ref:this.weekCalendar,style:[this.style.weekContainer,position===Positions.OPEN?this.style.hidden:this.style.visible],pointerEvents:position===Positions.CLOSED?'auto':'none'},React.createElement(WeekComponent,_extends({},this.props,weekCalendarProps,{current:this.props.context.date,onDayPress:this.onDayPress,style:this.props.calendarStyle,hideDayNames:true,accessibilityElementsHidden:true,importantForAccessibility:'no-hide-descendants'})));}},{key:\"renderKnob\",value:function renderKnob(){return React.createElement(View,{style:this.style.knobContainer,pointerEvents:'none',testID:this.props.testID+\"-knob\"},React.createElement(View,{style:this.style.knob,testID:CALENDAR_KNOB}));}},{key:\"render\",value:function render(){var _this$props3=this.props,style=_this$props3.style,hideKnob=_this$props3.hideKnob,horizontal=_this$props3.horizontal,allowShadow=_this$props3.allowShadow,theme=_this$props3.theme,others=_objectWithoutProperties(_this$props3,[\"style\",\"hideKnob\",\"horizontal\",\"allowShadow\",\"theme\"]);var _this$state2=this.state,deltaY=_this$state2.deltaY,position=_this$state2.position,screenReaderEnabled=_this$state2.screenReaderEnabled;var isOpen=position===Positions.OPEN;var themeObject=_extends(this.headerStyleOverride,theme);return React.createElement(View,{testID:this.props.testID,style:[allowShadow&&this.style.containerShadow,style]},screenReaderEnabled?React.createElement(Calendar,_extends({testID:\"calendar\"},others,{theme:themeObject,onDayPress:this.onDayPress,hideExtraDays:true,renderArrow:this.renderArrow})):React.createElement(Animated.View,_extends({ref:this.wrapper,style:{height:deltaY}},this.panResponder.panHandlers),React.createElement(CalendarList,_extends({testID:\"calendar\",horizontal:horizontal},others,{theme:themeObject,ref:this.calendar,current:this.initialDate,onDayPress:this.onDayPress,onVisibleMonthsChange:this.onVisibleMonthsChange,pagingEnabled:true,scrollEnabled:isOpen,hideArrows:this.shouldHideArrows(),onPressArrowLeft:this.onPressArrowLeft,onPressArrowRight:this.onPressArrowRight,hideExtraDays:!horizontal,renderArrow:this.renderArrow,staticHeader:true})),horizontal&&this.renderWeekCalendar(),!hideKnob&&this.renderKnob(),!horizontal&&this.renderHeader()));}}]);return ExpandableCalendar;}(Component);ExpandableCalendar.displayName='ExpandableCalendar';ExpandableCalendar.propTypes=_objectSpread(_objectSpread({},CalendarList.propTypes),{},{initialPosition:PropTypes.oneOf(_.values(Positions)),onCalendarToggled:PropTypes.func,disablePan:PropTypes.bool,hideKnob:PropTypes.bool,leftArrowImageSource:PropTypes.oneOfType([PropTypes.object,PropTypes.number,PropTypes.func]),rightArrowImageSource:PropTypes.oneOfType([PropTypes.object,PropTypes.number,PropTypes.func]),allowShadow:PropTypes.bool,disableWeekScroll:PropTypes.bool,openThreshold:PropTypes.number,closeThreshold:PropTypes.number});ExpandableCalendar.defaultProps={horizontal:true,initialPosition:Positions.CLOSED,firstDay:0,leftArrowImageSource:LEFT_ARROW,rightArrowImageSource:RIGHT_ARROW,allowShadow:true,openThreshold:PAN_GESTURE_THRESHOLD,closeThreshold:PAN_GESTURE_THRESHOLD};ExpandableCalendar.positions=Positions;export default asCalendarConsumer(ExpandableCalendar);","map":{"version":3,"sources":["/app/node_modules/react-native-calendars/src/expandableCalendar/index.js"],"names":["_","PropTypes","memoize","XDate","React","Component","CALENDAR_KNOB","page","weekDayNames","parseDate","toMarkingFormat","styleConstructor","HEADER_HEIGHT","CalendarList","Calendar","asCalendarConsumer","WeekCalendar","Week","commons","require","updateSources","UpdateSources","Positions","SPEED","BOUNCINESS","CLOSED_HEIGHT","WEEK_HEIGHT","KNOB_CONTAINER_HEIGHT","DAY_NAMES_PADDING","PAN_GESTURE_THRESHOLD","LEFT_ARROW","RIGHT_ARROW","ExpandableCalendar","props","style","theme","header","createRef","wrapper","calendar","weekCalendar","handleScreenReaderStatus","screenReaderEnabled","setState","handleMoveShouldSetPanResponder","gestureState","disablePan","horizontal","state","position","OPEN","CLOSED","dy","handlePanResponderGrant","handlePanResponderMove","_wrapperStyles","height","Math","max","closedHeight","_height","_headerStyles","top","min","_weekCalendarStyles","opacity","updateNativeStyles","handlePanResponderEnd","Number","bounceToPosition","onAnimatedFinished","result","finished","onPressArrowLeft","invoke","scrollPage","onPressArrowRight","onDayPress","value","context","dateString","DAY_PRESS","setTimeout","onVisibleMonthsChange","visibleMonth","first","month","date","updateSource","getMonth","next","isLaterDate","numberOfWeeks","getNumberOfWeeksInMonth","openHeight","getOpenHeight","getWeekDaysStyle","calendarStyle","paddingLeft","paddingRight","renderWeekDaysNames","weekDaysNames","map","day","index","weekday","renderArrow","direction","rightArrowImageSource","leftArrowImageSource","testID","isFunction","arrowImage","hideKnob","startHeight","initialPosition","initialDate","headerStyleOverride","stylesheet","week","marginTop","marginBottom","flexDirection","justifyContent","deltaY","Animated","Value","headerDeltaY","panResponder","PanResponder","create","onMoveShouldSetPanResponder","onPanResponderGrant","onPanResponderMove","onPanResponderRelease","onPanResponderTerminate","AccessibilityInfo","isScreenReaderEnabled","then","fetch","prevProps","scrollToDate","current","setNativeProps","scrollToDay","scrollToMonth","d","setDate","addMonths","firstDay","dayOfTheWeek","getDay","firstDayOfWeek","addDays","PAGE_SCROLL","screenHeight","screenWidth","getFullYear","days","length","hideArrows","date1","date2","year","getYear","toValue","openThreshold","closeThreshold","threshold","isOpen","newValue","setValue","spring","speed","bounciness","useNativeDriver","start","setPosition","closeHeader","resetWeekCalendarOpacity","isClosed","monthYear","toString","headerTitle","disableWeekScroll","WeekComponent","weekCalendarProps","undefined","allowShadow","weekContainer","hidden","visible","knobContainer","knob","others","themeObject","containerShadow","panHandlers","shouldHideArrows","renderWeekCalendar","renderKnob","renderHeader","displayName","propTypes","oneOf","values","onCalendarToggled","func","bool","oneOfType","object","number","defaultProps","positions"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport memoize from 'memoize-one';\nimport XDate from 'xdate';\nimport React, { Component } from 'react';\nimport { AccessibilityInfo, PanResponder, Animated, View, Text, Image } from 'react-native';\n// @ts-expect-error\nimport { CALENDAR_KNOB } from '../testIDs';\n// @ts-expect-error\nimport { page, weekDayNames } from '../dateutils';\n// @ts-expect-error\nimport { parseDate, toMarkingFormat } from '../interface';\nimport styleConstructor, { HEADER_HEIGHT } from './style';\nimport CalendarList from '../calendar-list';\nimport Calendar from '../calendar';\nimport asCalendarConsumer from './asCalendarConsumer';\nimport WeekCalendar from './WeekCalendar';\nimport Week from './week';\nconst commons = require('./commons');\nconst updateSources = commons.UpdateSources;\nvar Positions;\n(function (Positions) {\n    Positions[\"CLOSED\"] = \"closed\";\n    Positions[\"OPEN\"] = \"open\";\n})(Positions || (Positions = {}));\nconst SPEED = 20;\nconst BOUNCINESS = 6;\nconst CLOSED_HEIGHT = 120; // header + 1 week\nconst WEEK_HEIGHT = 46;\nconst KNOB_CONTAINER_HEIGHT = 20;\nconst DAY_NAMES_PADDING = 24;\nconst PAN_GESTURE_THRESHOLD = 30;\nconst LEFT_ARROW = require('../calendar/img/previous.png');\nconst RIGHT_ARROW = require('../calendar/img/next.png');\n/**\n * @description: Expandable calendar component\n * @note: Should be wrapped with 'CalendarProvider'\n * @extends: CalendarList\n * @extendslink: docs/CalendarList\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nclass ExpandableCalendar extends Component {\n    static displayName = 'ExpandableCalendar';\n    static propTypes = {\n        ...CalendarList.propTypes,\n        /** the initial position of the calendar ('open' or 'closed') */\n        initialPosition: PropTypes.oneOf(_.values(Positions)),\n        /** callback that fires when the calendar is opened or closed */\n        onCalendarToggled: PropTypes.func,\n        /** an option to disable the pan gesture and disable the opening and closing of the calendar (initialPosition will persist)*/\n        disablePan: PropTypes.bool,\n        /** whether to hide the knob  */\n        hideKnob: PropTypes.bool,\n        /** source for the left arrow image */\n        leftArrowImageSource: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.func]),\n        /** source for the right arrow image */\n        rightArrowImageSource: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.func]),\n        /** whether to have shadow/elevation for the calendar */\n        allowShadow: PropTypes.bool,\n        /** whether to disable the week scroll in closed position */\n        disableWeekScroll: PropTypes.bool,\n        /** a threshold for opening the calendar with the pan gesture */\n        openThreshold: PropTypes.number,\n        /** a threshold for closing the calendar with the pan gesture */\n        closeThreshold: PropTypes.number\n    };\n    static defaultProps = {\n        horizontal: true,\n        initialPosition: Positions.CLOSED,\n        firstDay: 0,\n        leftArrowImageSource: LEFT_ARROW,\n        rightArrowImageSource: RIGHT_ARROW,\n        allowShadow: true,\n        openThreshold: PAN_GESTURE_THRESHOLD,\n        closeThreshold: PAN_GESTURE_THRESHOLD\n    };\n    static positions = Positions;\n    style = styleConstructor(this.props.theme);\n    panResponder;\n    closedHeight;\n    numberOfWeeks;\n    openHeight;\n    _height;\n    _wrapperStyles;\n    _headerStyles;\n    _weekCalendarStyles;\n    visibleMonth;\n    initialDate;\n    headerStyleOverride;\n    header = React.createRef();\n    wrapper = React.createRef();\n    calendar = React.createRef();\n    weekCalendar = React.createRef();\n    constructor(props) {\n        super(props);\n        this.closedHeight = CLOSED_HEIGHT + (props.hideKnob ? 0 : KNOB_CONTAINER_HEIGHT);\n        this.numberOfWeeks = this.getNumberOfWeeksInMonth(new XDate(this.props.context.date));\n        this.openHeight = this.getOpenHeight();\n        const startHeight = props.initialPosition === Positions.CLOSED ? this.closedHeight : this.openHeight;\n        this._height = startHeight;\n        this._wrapperStyles = { style: { height: startHeight } };\n        this._headerStyles = { style: { top: props.initialPosition === Positions.CLOSED ? 0 : -HEADER_HEIGHT } };\n        this._weekCalendarStyles = { style: {} };\n        this.visibleMonth = this.getMonth(this.props.context.date);\n        this.initialDate = new XDate(props.context.date); // should be set only once!!!\n        this.headerStyleOverride = {\n            stylesheet: {\n                calendar: {\n                    header: {\n                        week: {\n                            marginTop: 7,\n                            marginBottom: -4,\n                            flexDirection: 'row',\n                            justifyContent: 'space-around'\n                        }\n                    }\n                }\n            }\n        };\n        this.state = {\n            deltaY: new Animated.Value(startHeight),\n            headerDeltaY: new Animated.Value(props.initialPosition === Positions.CLOSED ? 0 : -HEADER_HEIGHT),\n            position: props.initialPosition || Positions.CLOSED,\n            screenReaderEnabled: false\n        };\n        this.panResponder = PanResponder.create({\n            onMoveShouldSetPanResponder: this.handleMoveShouldSetPanResponder,\n            onPanResponderGrant: this.handlePanResponderGrant,\n            onPanResponderMove: this.handlePanResponderMove,\n            onPanResponderRelease: this.handlePanResponderEnd,\n            onPanResponderTerminate: this.handlePanResponderEnd\n        });\n    }\n    componentDidMount() {\n        if (AccessibilityInfo) {\n            if (AccessibilityInfo.isScreenReaderEnabled) {\n                AccessibilityInfo.isScreenReaderEnabled().then(this.handleScreenReaderStatus);\n            }\n            else if (AccessibilityInfo.fetch) {\n                // Support for older RN versions\n                AccessibilityInfo.fetch().then(this.handleScreenReaderStatus);\n            }\n        }\n    }\n    componentDidUpdate(prevProps) {\n        const { date } = this.props.context;\n        if (date !== prevProps.context.date) {\n            // date was changed from AgendaList, arrows or scroll\n            this.scrollToDate(date);\n        }\n    }\n    handleScreenReaderStatus = (screenReaderEnabled) => {\n        this.setState({ screenReaderEnabled });\n    };\n    updateNativeStyles() {\n        this.wrapper?.current?.setNativeProps(this._wrapperStyles);\n        if (!this.props.horizontal) {\n            this.header?.current?.setNativeProps(this._headerStyles);\n        }\n        else {\n            this.weekCalendar?.current?.setNativeProps(this._weekCalendarStyles);\n        }\n    }\n    /** Scroll */\n    scrollToDate(date) {\n        if (!this.props.horizontal) {\n            this.calendar?.current?.scrollToDay(new XDate(date), 0, true);\n        }\n        else if (this.getMonth(date) !== this.visibleMonth) {\n            // don't scroll if the month is already visible\n            this.calendar?.current?.scrollToMonth(new XDate(date));\n        }\n    }\n    scrollPage(next) {\n        if (this.props.horizontal) {\n            const d = parseDate(this.props.context.date);\n            if (this.state.position === Positions.OPEN) {\n                d.setDate(1);\n                d.addMonths(next ? 1 : -1);\n            }\n            else {\n                const { firstDay = 0 } = this.props;\n                let dayOfTheWeek = d.getDay();\n                if (dayOfTheWeek < firstDay && firstDay > 0) {\n                    dayOfTheWeek = 7 + dayOfTheWeek;\n                }\n                const firstDayOfWeek = (next ? 7 : -7) - dayOfTheWeek + firstDay;\n                d.addDays(firstDayOfWeek);\n            }\n            _.invoke(this.props.context, 'setDate', toMarkingFormat(d), updateSources.PAGE_SCROLL);\n        }\n    }\n    /** Utils */\n    getOpenHeight() {\n        if (!this.props.horizontal) {\n            return Math.max(commons.screenHeight, commons.screenWidth);\n        }\n        return CLOSED_HEIGHT + WEEK_HEIGHT * (this.numberOfWeeks - 1) + (this.props.hideKnob ? 12 : KNOB_CONTAINER_HEIGHT);\n    }\n    getYear(date) {\n        const d = new XDate(date);\n        return d.getFullYear();\n    }\n    getMonth(date) {\n        const d = new XDate(date);\n        // getMonth() returns the month of the year (0-11). Value is zero-index, meaning Jan=0, Feb=1, Mar=2, etc.\n        return d.getMonth() + 1;\n    }\n    getNumberOfWeeksInMonth(month) {\n        const days = page(month, this.props.firstDay);\n        return days.length / 7;\n    }\n    shouldHideArrows() {\n        if (!this.props.horizontal) {\n            return true;\n        }\n        return this.props.hideArrows || false;\n    }\n    isLaterDate(date1, date2) {\n        if (date1 && date2) {\n            if (date1.year > this.getYear(date2)) {\n                return true;\n            }\n            if (date1.year === this.getYear(date2)) {\n                if (date1.month > this.getMonth(date2)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    /** Pan Gesture */\n    handleMoveShouldSetPanResponder = (_, gestureState) => {\n        if (this.props.disablePan) {\n            return false;\n        }\n        if (!this.props.horizontal && this.state.position === Positions.OPEN) {\n            // disable pan detection when vertical calendar is open to allow calendar scroll\n            return false;\n        }\n        if (this.state.position === Positions.CLOSED && gestureState.dy < 0) {\n            // disable pan detection to limit to closed height\n            return false;\n        }\n        return gestureState.dy > 5 || gestureState.dy < -5;\n    };\n    handlePanResponderGrant = () => { };\n    handlePanResponderMove = (_, gestureState) => {\n        // limit min height to closed height\n        this._wrapperStyles.style.height = Math.max(this.closedHeight, this._height + gestureState.dy);\n        if (!this.props.horizontal) {\n            // vertical CalenderList header\n            this._headerStyles.style.top = Math.min(Math.max(-gestureState.dy, -HEADER_HEIGHT), 0);\n        }\n        else {\n            // horizontal Week view\n            if (this.state.position === Positions.CLOSED) {\n                this._weekCalendarStyles.style.opacity = Math.min(1, Math.max(1 - gestureState.dy / 100, 0));\n            }\n        }\n        this.updateNativeStyles();\n    };\n    handlePanResponderEnd = () => {\n        this._height = Number(this._wrapperStyles.style.height);\n        this.bounceToPosition();\n    };\n    /** Animated */\n    bounceToPosition(toValue = 0) {\n        if (!this.props.disablePan) {\n            const { deltaY, position } = this.state;\n            const { openThreshold = PAN_GESTURE_THRESHOLD, closeThreshold = PAN_GESTURE_THRESHOLD } = this.props;\n            const threshold = position === Positions.OPEN ? this.openHeight - closeThreshold : this.closedHeight + openThreshold;\n            let isOpen = this._height >= threshold;\n            const newValue = isOpen ? this.openHeight : this.closedHeight;\n            deltaY.setValue(this._height); // set the start position for the animated value\n            this._height = toValue || newValue;\n            isOpen = this._height >= threshold; // re-check after this._height was set\n            Animated.spring(deltaY, {\n                toValue: this._height,\n                speed: SPEED,\n                bounciness: BOUNCINESS,\n                useNativeDriver: false\n            }).start(this.onAnimatedFinished);\n            _.invoke(this.props, 'onCalendarToggled', isOpen);\n            this.setPosition();\n            this.closeHeader(isOpen);\n            this.resetWeekCalendarOpacity(isOpen);\n        }\n    }\n    onAnimatedFinished = (result) => {\n        if (result?.finished) {\n            // this.setPosition();\n        }\n    };\n    setPosition() {\n        const isClosed = this._height === this.closedHeight;\n        this.setState({ position: isClosed ? Positions.CLOSED : Positions.OPEN });\n    }\n    resetWeekCalendarOpacity(isOpen) {\n        this._weekCalendarStyles.style.opacity = isOpen ? 0 : 1;\n        this.updateNativeStyles();\n    }\n    closeHeader(isOpen) {\n        const { headerDeltaY } = this.state;\n        headerDeltaY.setValue(Number(this._headerStyles.style.top)); // set the start position for the animated value\n        if (!this.props.horizontal && !isOpen) {\n            Animated.spring(headerDeltaY, {\n                toValue: 0,\n                speed: SPEED / 10,\n                bounciness: 1,\n                useNativeDriver: false\n            }).start();\n        }\n    }\n    /** Events */\n    onPressArrowLeft = () => {\n        _.invoke(this.props, 'onPressArrowLeft');\n        this.scrollPage(false);\n    };\n    onPressArrowRight = () => {\n        _.invoke(this.props, 'onPressArrowRight');\n        this.scrollPage(true);\n    };\n    onDayPress = (value) => {\n        // {year: 2019, month: 4, day: 22, timestamp: 1555977600000, dateString: \"2019-04-23\"}\n        _.invoke(this.props.context, 'setDate', value.dateString, updateSources.DAY_PRESS);\n        setTimeout(() => {\n            // to allows setDate to be completed\n            if (this.state.position === Positions.OPEN) {\n                this.bounceToPosition(this.closedHeight);\n            }\n        }, 0);\n        if (this.props.onDayPress) {\n            this.props.onDayPress(value);\n        }\n    };\n    onVisibleMonthsChange = (value) => {\n        if (this.visibleMonth !== _.first(value)?.month) {\n            this.visibleMonth = _.first(value)?.month; // equivalent to this.getMonth(value[0].dateString)\n            // for horizontal scroll\n            const { date, updateSource } = this.props.context;\n            if (this.visibleMonth !== this.getMonth(date) && updateSource !== updateSources.DAY_PRESS) {\n                const next = this.isLaterDate(_.first(value), date);\n                this.scrollPage(next);\n            }\n            // updating openHeight\n            setTimeout(() => {\n                // to wait for setDate() call in horizontal scroll (this.scrollPage())\n                const numberOfWeeks = this.getNumberOfWeeksInMonth(parseDate(this.props.context.date));\n                if (numberOfWeeks !== this.numberOfWeeks) {\n                    this.numberOfWeeks = numberOfWeeks;\n                    this.openHeight = this.getOpenHeight();\n                    if (this.state.position === Positions.OPEN) {\n                        this.bounceToPosition(this.openHeight);\n                    }\n                }\n            }, 0);\n        }\n    };\n    /** Renders */\n    getWeekDaysStyle = memoize(calendarStyle => {\n        return [\n            this.style.weekDayNames,\n            {\n                paddingLeft: calendarStyle?.paddingLeft + 6 || DAY_NAMES_PADDING,\n                paddingRight: calendarStyle?.paddingRight + 6 || DAY_NAMES_PADDING\n            }\n        ];\n    });\n    renderWeekDaysNames = memoize((weekDaysNames, calendarStyle) => {\n        return (<View style={this.getWeekDaysStyle(calendarStyle)}>\n        {weekDaysNames.map((day, index) => (<Text allowFontScaling={false} key={day + index} style={this.style.weekday} numberOfLines={1}>\n            {day}\n          </Text>))}\n      </View>);\n    });\n    renderHeader() {\n        const monthYear = new XDate(this.props.context.date).toString('MMMM yyyy');\n        const weekDaysNames = weekDayNames(this.props.firstDay);\n        return (<Animated.View ref={this.header} style={[this.style.header, { height: HEADER_HEIGHT, top: this.state.headerDeltaY }]} pointerEvents={'none'}>\n        <Text allowFontScaling={false} style={this.style.headerTitle}>\n          {monthYear}\n        </Text>\n        {this.renderWeekDaysNames(weekDaysNames, this.props.calendarStyle)}\n      </Animated.View>);\n    }\n    renderWeekCalendar() {\n        const { position } = this.state;\n        const { disableWeekScroll } = this.props;\n        const WeekComponent = disableWeekScroll ? Week : WeekCalendar;\n        const weekCalendarProps = disableWeekScroll ? undefined : { allowShadow: false };\n        return (<Animated.View ref={this.weekCalendar} style={[this.style.weekContainer, position === Positions.OPEN ? this.style.hidden : this.style.visible]} pointerEvents={position === Positions.CLOSED ? 'auto' : 'none'}>\n        <WeekComponent {...this.props} {...weekCalendarProps} current={this.props.context.date} onDayPress={this.onDayPress} style={this.props.calendarStyle} hideDayNames={true} accessibilityElementsHidden // iOS\n         importantForAccessibility={'no-hide-descendants'} // Android\n        />\n      </Animated.View>);\n    }\n    renderKnob() {\n        // TODO: turn to TouchableOpacity with onPress that closes it\n        return (<View style={this.style.knobContainer} pointerEvents={'none'} testID={`${this.props.testID}-knob`}>\n        <View style={this.style.knob} testID={CALENDAR_KNOB}/>\n      </View>);\n    }\n    renderArrow = (direction) => {\n        const { renderArrow, rightArrowImageSource = RIGHT_ARROW, leftArrowImageSource = LEFT_ARROW, testID } = this.props;\n        if (_.isFunction(renderArrow)) {\n            return renderArrow(direction);\n        }\n        return (<Image source={direction === 'right' ? rightArrowImageSource : leftArrowImageSource} style={this.style.arrowImage} testID={`${testID}-${direction}-arrow`}/>);\n    };\n    render() {\n        const { style, hideKnob, horizontal, allowShadow, theme, ...others } = this.props;\n        const { deltaY, position, screenReaderEnabled } = this.state;\n        const isOpen = position === Positions.OPEN;\n        const themeObject = Object.assign(this.headerStyleOverride, theme);\n        return (<View testID={this.props.testID} style={[allowShadow && this.style.containerShadow, style]}>\n        {screenReaderEnabled ? (<Calendar testID=\"calendar\" {...others} theme={themeObject} onDayPress={this.onDayPress} hideExtraDays renderArrow={this.renderArrow}/>) : (<Animated.View ref={this.wrapper} style={{ height: deltaY }} {...this.panResponder.panHandlers}>\n            <CalendarList testID=\"calendar\" horizontal={horizontal} {...others} theme={themeObject} ref={this.calendar} current={this.initialDate} onDayPress={this.onDayPress} onVisibleMonthsChange={this.onVisibleMonthsChange} pagingEnabled scrollEnabled={isOpen} hideArrows={this.shouldHideArrows()} onPressArrowLeft={this.onPressArrowLeft} onPressArrowRight={this.onPressArrowRight} hideExtraDays={!horizontal} renderArrow={this.renderArrow} staticHeader/>\n            {horizontal && this.renderWeekCalendar()}\n            {!hideKnob && this.renderKnob()}\n            {!horizontal && this.renderHeader()}\n          </Animated.View>)}\n      </View>);\n    }\n}\nexport default asCalendarConsumer(ExpandableCalendar);\n"]},"metadata":{},"sourceType":"module"}