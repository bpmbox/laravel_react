{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import XDate from'xdate';var offset=100;function buildEvent(column,left,width,dayStart){var startTime=new XDate(column.start);var endTime=column.end?new XDate(column.end):new XDate(startTime).addHours(1);var dayStartTime=new XDate(startTime).clearTime();column.top=(dayStartTime.diffHours(startTime)-dayStart)*offset;column.height=startTime.diffHours(endTime)*offset;column.width=width;column.left=left;return column;}function collision(a,b){return a.end>b.start&&a.start<b.end;}function expand(ev,column,columns){var colSpan=1;for(var i=column+1;i<columns.length;i++){var col=columns[i];for(var j=0;j<col.length;j++){var ev1=col[j];if(collision(ev,ev1)){return colSpan;}}colSpan++;}return colSpan;}function pack(columns,width,calculatedEvents,dayStart){var colLength=columns.length;for(var i=0;i<colLength;i++){var col=columns[i];for(var j=0;j<col.length;j++){var colSpan=expand(col[j],i,columns);var L=i/colLength*width;var W=width*colSpan/colLength-10;calculatedEvents.push(buildEvent(col[j],L,W,dayStart));}}}function populateEvents(events,screenWidth,dayStart){var lastEnd;var columns;var calculatedEvents=[];events=events.map(function(ev,index){return _objectSpread(_objectSpread({},ev),{},{index:index});}).sort(function(a,b){if(a.start<b.start)return-1;if(a.start>b.start)return 1;if(a.end<b.end)return-1;if(a.end>b.end)return 1;return 0;});columns=[];lastEnd=null;events.forEach(function(ev){if(lastEnd!==null&&ev.start>=lastEnd){pack(columns,screenWidth,calculatedEvents,dayStart);columns=[];lastEnd=null;}var placed=false;for(var i=0;i<columns.length;i++){var col=columns[i];if(!collision(col[col.length-1],ev)){col.push(ev);placed=true;break;}}if(!placed){columns.push([ev]);}if(lastEnd===null||ev.end>lastEnd){lastEnd=ev.end;}});if(columns.length>0){pack(columns,screenWidth,calculatedEvents,dayStart);}return calculatedEvents;}export default populateEvents;","map":{"version":3,"sources":["/app/node_modules/react-native-calendars/src/timeline/Packer.js"],"names":["XDate","offset","buildEvent","column","left","width","dayStart","startTime","start","endTime","end","addHours","dayStartTime","clearTime","top","diffHours","height","collision","a","b","expand","ev","columns","colSpan","i","length","col","j","ev1","pack","calculatedEvents","colLength","L","W","push","populateEvents","events","screenWidth","lastEnd","map","index","sort","forEach","placed"],"mappings":"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","sourcesContent":["// @flow\nimport XDate from 'xdate';\nconst offset = 100;\nfunction buildEvent(column, left, width, dayStart) {\n    const startTime = new XDate(column.start);\n    const endTime = column.end ? new XDate(column.end) : new XDate(startTime).addHours(1);\n    const dayStartTime = new XDate(startTime).clearTime();\n    column.top = (dayStartTime.diffHours(startTime) - dayStart) * offset;\n    column.height = startTime.diffHours(endTime) * offset;\n    column.width = width;\n    column.left = left;\n    return column;\n}\nfunction collision(a, b) {\n    return a.end > b.start && a.start < b.end;\n}\nfunction expand(ev, column, columns) {\n    let colSpan = 1;\n    for (let i = column + 1; i < columns.length; i++) {\n        let col = columns[i];\n        for (let j = 0; j < col.length; j++) {\n            let ev1 = col[j];\n            if (collision(ev, ev1)) {\n                return colSpan;\n            }\n        }\n        colSpan++;\n    }\n    return colSpan;\n}\nfunction pack(columns, width, calculatedEvents, dayStart) {\n    let colLength = columns.length;\n    for (let i = 0; i < colLength; i++) {\n        let col = columns[i];\n        for (let j = 0; j < col.length; j++) {\n            const colSpan = expand(col[j], i, columns);\n            const L = (i / colLength) * width;\n            const W = (width * colSpan) / colLength - 10;\n            calculatedEvents.push(buildEvent(col[j], L, W, dayStart));\n        }\n    }\n}\nfunction populateEvents(events, screenWidth, dayStart) {\n    let lastEnd;\n    let columns;\n    let calculatedEvents = [];\n    events = events\n        .map((ev, index) => ({ ...ev, index: index }))\n        .sort(function (a, b) {\n        if (a.start < b.start)\n            return -1;\n        if (a.start > b.start)\n            return 1;\n        if (a.end < b.end)\n            return -1;\n        if (a.end > b.end)\n            return 1;\n        return 0;\n    });\n    columns = [];\n    lastEnd = null;\n    events.forEach(function (ev) {\n        if (lastEnd !== null && ev.start >= lastEnd) {\n            pack(columns, screenWidth, calculatedEvents, dayStart);\n            columns = [];\n            lastEnd = null;\n        }\n        let placed = false;\n        for (let i = 0; i < columns.length; i++) {\n            let col = columns[i];\n            if (!collision(col[col.length - 1], ev)) {\n                col.push(ev);\n                placed = true;\n                break;\n            }\n        }\n        if (!placed) {\n            columns.push([ev]);\n        }\n        if (lastEnd === null || ev.end > lastEnd) {\n            lastEnd = ev.end;\n        }\n    });\n    if (columns.length > 0) {\n        pack(columns, screenWidth, calculatedEvents, dayStart);\n    }\n    return calculatedEvents;\n}\nexport default populateEvents;\n"]},"metadata":{},"sourceType":"module"}