{"ast":null,"code":"\"use strict\";var _objectWithoutProperties=require(\"@babel/runtime/helpers/objectWithoutProperties\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=RenderHTMLConfigProvider;exports.renderHTMLConfigPropTypes=void 0;var _react=_interopRequireWildcard(require(\"react\"));var _propTypes=_interopRequireDefault(require(\"prop-types\"));var _RenderersPropsProvider=_interopRequireDefault(require(\"./context/RenderersPropsProvider\"));var _SharedPropsProvider=_interopRequireDefault(require(\"./context/SharedPropsProvider\"));var _TChildrenRendererContext=_interopRequireDefault(require(\"./context/TChildrenRendererContext\"));var _TNodeChildrenRenderer=_interopRequireDefault(require(\"./TNodeChildrenRenderer\"));var _TChildrenRenderer=_interopRequireDefault(require(\"./TChildrenRenderer\"));var _sourceLoaderContext=_interopRequireWildcard(require(\"./context/sourceLoaderContext\"));var _RenderRegistryProvider=_interopRequireDefault(require(\"./context/RenderRegistryProvider\"));var _TRenderEngineProvider=require(\"./TRenderEngineProvider\");var _useProfiler=_interopRequireDefault(require(\"./hooks/useProfiler\"));var _ListStyleSpecsProvider=_interopRequireDefault(require(\"./context/ListStyleSpecsProvider\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!==\"function\")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!==\"object\"&&typeof obj!==\"function\"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!==\"default\"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var childrenRendererContext={TChildrenRenderer:_TChildrenRenderer.default,TNodeChildrenRenderer:_TNodeChildrenRenderer.default};var renderHTMLConfigPropTypes={defaultTextProps:_propTypes.default.object,defaultViewProps:_propTypes.default.object,enableExperimentalMarginCollapsing:_propTypes.default.bool,remoteErrorView:_propTypes.default.func,remoteLoadingView:_propTypes.default.func,debug:_propTypes.default.bool,computeEmbeddedMaxWidth:_propTypes.default.func,renderersProps:_propTypes.default.object,WebView:_propTypes.default.any,GenericPressable:_propTypes.default.any,defaultWebViewProps:_propTypes.default.object,pressableHightlightColor:_propTypes.default.string,customListStyleSpecs:_propTypes.default.object,renderers:_propTypes.default.object};exports.renderHTMLConfigPropTypes=renderHTMLConfigPropTypes;function RenderHTMLConfigProvider(props){var remoteErrorView=props.remoteErrorView,remoteLoadingView=props.remoteLoadingView,renderersProps=props.renderersProps,children=props.children,renderers=props.renderers,sharedProps=_objectWithoutProperties(props,[\"remoteErrorView\",\"remoteLoadingView\",\"renderersProps\",\"children\",\"renderers\"]);var engine=(0,_TRenderEngineProvider.useAmbientTRenderEngine)();var profile=(0,_useProfiler.default)({prop:'remoteErrorView or remoteLoadingView'});var sourceLoaderConfig=(0,_react.useMemo)(function(){__DEV__&&profile();return{remoteErrorView:remoteErrorView||_sourceLoaderContext.defaultRenderError,remoteLoadingView:remoteLoadingView||_sourceLoaderContext.defaultRenderLoading};},[remoteErrorView,remoteLoadingView,profile]);return _react.default.createElement(_RenderRegistryProvider.default,{renderers:renderers,elementModels:engine.getHTMLElementsModels()},_react.default.createElement(_SharedPropsProvider.default,sharedProps,_react.default.createElement(_ListStyleSpecsProvider.default,null,_react.default.createElement(_RenderersPropsProvider.default,{renderersProps:renderersProps},_react.default.createElement(_TChildrenRendererContext.default.Provider,{value:childrenRendererContext},_react.default.createElement(_sourceLoaderContext.default.Provider,{value:sourceLoaderConfig},children))))));}RenderHTMLConfigProvider.propTypes=renderHTMLConfigPropTypes;","map":{"version":3,"sources":["RenderHTMLConfigProvider.tsx"],"names":["childrenRendererContext","TChildrenRenderer","TNodeChildrenRenderer","renderHTMLConfigPropTypes","defaultTextProps","PropTypes","defaultViewProps","enableExperimentalMarginCollapsing","remoteErrorView","remoteLoadingView","debug","computeEmbeddedMaxWidth","renderersProps","WebView","GenericPressable","defaultWebViewProps","pressableHightlightColor","customListStyleSpecs","renderers","object","sharedProps","engine","profile","prop","sourceLoaderConfig","__DEV__","defaultRenderError","defaultRenderLoading","RenderHTMLConfigProvider"],"mappings":"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","sourcesContent":["import React, { PropsWithChildren, ReactElement, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport RenderersPropsProvider from './context/RenderersPropsProvider';\nimport SharedPropsProvider from './context/SharedPropsProvider';\nimport TChildrenRenderersContext from './context/TChildrenRendererContext';\nimport { RenderHTMLConfig } from './shared-types';\nimport TNodeChildrenRenderer from './TNodeChildrenRenderer';\nimport TChildrenRenderer from './TChildrenRenderer';\nimport sourceLoaderContext, {\n  defaultRenderError,\n  defaultRenderLoading\n} from './context/sourceLoaderContext';\nimport RenderRegistryProvider from './context/RenderRegistryProvider';\nimport { useAmbientTRenderEngine } from './TRenderEngineProvider';\nimport useProfiler from './hooks/useProfiler';\nimport ListStyleSpecsProvider from './context/ListStyleSpecsProvider';\n\nconst childrenRendererContext = {\n  TChildrenRenderer,\n  TNodeChildrenRenderer\n};\n\nexport type RenderHTMLConfigPropTypes = Record<keyof RenderHTMLConfig, any>;\n\nexport const renderHTMLConfigPropTypes: RenderHTMLConfigPropTypes = {\n  defaultTextProps: PropTypes.object,\n  defaultViewProps: PropTypes.object,\n  enableExperimentalMarginCollapsing: PropTypes.bool,\n  remoteErrorView: PropTypes.func,\n  remoteLoadingView: PropTypes.func,\n  debug: PropTypes.bool,\n  computeEmbeddedMaxWidth: PropTypes.func,\n  renderersProps: PropTypes.object,\n  WebView: PropTypes.any,\n  GenericPressable: PropTypes.any,\n  defaultWebViewProps: PropTypes.object,\n  pressableHightlightColor: PropTypes.string,\n  customListStyleSpecs: PropTypes.object,\n  renderers: PropTypes.object\n};\n\n/**\n * A component to provide configuration for {@link RenderHTMLSource}\n * descendants, to be used in conjunction with {@link TRenderEngineProvider}.\n */\nexport default function RenderHTMLConfigProvider(\n  props: PropsWithChildren<RenderHTMLConfig>\n): ReactElement {\n  const {\n    remoteErrorView,\n    remoteLoadingView,\n    renderersProps,\n    children,\n    renderers,\n    ...sharedProps\n  } = props;\n  const engine = useAmbientTRenderEngine();\n  const profile = useProfiler({ prop: 'remoteErrorView or remoteLoadingView' });\n  const sourceLoaderConfig = useMemo(() => {\n    __DEV__ && profile();\n    return {\n      remoteErrorView: remoteErrorView || defaultRenderError,\n      remoteLoadingView: remoteLoadingView || defaultRenderLoading\n    };\n  }, [remoteErrorView, remoteLoadingView, profile]);\n  return (\n    <RenderRegistryProvider\n      renderers={renderers}\n      elementModels={engine.getHTMLElementsModels()}>\n      <SharedPropsProvider {...sharedProps}>\n        <ListStyleSpecsProvider>\n          <RenderersPropsProvider renderersProps={renderersProps}>\n            <TChildrenRenderersContext.Provider value={childrenRendererContext}>\n              <sourceLoaderContext.Provider value={sourceLoaderConfig}>\n                {children}\n              </sourceLoaderContext.Provider>\n            </TChildrenRenderersContext.Provider>\n          </RenderersPropsProvider>\n        </ListStyleSpecsProvider>\n      </SharedPropsProvider>\n    </RenderRegistryProvider>\n  );\n}\n\n/**\n * @ignore\n */\nRenderHTMLConfigProvider.propTypes = renderHTMLConfigPropTypes;\n"]},"metadata":{},"sourceType":"script"}