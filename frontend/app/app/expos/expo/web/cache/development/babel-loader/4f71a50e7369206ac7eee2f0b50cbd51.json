{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/app/node_modules/react-native-calendars/src/timeline/Timeline.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport React, { Component } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport styleConstructor from \"./style\";\nimport populateEvents from \"./Packer\";\nvar LEFT_MARGIN = 60 - 1;\nvar TEXT_LINE_HEIGHT = 17;\n\nfunction range(from, to) {\n  return Array.from(Array(to), function (_, i) {\n    return from + i;\n  });\n}\n\nvar _Dimensions$get = Dimensions.get('window'),\n    dimensionWidth = _Dimensions$get.width;\n\nvar Timeline = function (_Component) {\n  _inherits(Timeline, _Component);\n\n  var _super = _createSuper(Timeline);\n\n  function Timeline(props) {\n    var _this;\n\n    _classCallCheck(this, Timeline);\n\n    _this = _super.call(this, props);\n    _this.scrollView = React.createRef();\n    var _this$props = _this.props,\n        _this$props$start = _this$props.start,\n        start = _this$props$start === void 0 ? 0 : _this$props$start,\n        _this$props$end = _this$props.end,\n        end = _this$props$end === void 0 ? 0 : _this$props$end;\n    _this.calendarHeight = (end - start) * 100;\n    _this.style = styleConstructor(props.theme || props.styles, _this.calendarHeight);\n    var width = dimensionWidth - LEFT_MARGIN;\n    var packedEvents = populateEvents(props.events, width, start);\n    var initPosition = _.min(_.map(packedEvents, 'top')) - _this.calendarHeight / (end - start);\n    var verifiedInitPosition = initPosition < 0 ? 0 : initPosition;\n    _this.state = {\n      _scrollY: verifiedInitPosition,\n      packedEvents: packedEvents\n    };\n    return _this;\n  }\n\n  _createClass(Timeline, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var width = dimensionWidth - LEFT_MARGIN;\n      var prevEvents = prevProps.events,\n          _prevProps$start = prevProps.start,\n          prevStart = _prevProps$start === void 0 ? 0 : _prevProps$start;\n      var _this$props2 = this.props,\n          events = _this$props2.events,\n          _this$props2$start = _this$props2.start,\n          start = _this$props2$start === void 0 ? 0 : _this$props2$start;\n\n      if (prevEvents !== events || prevStart !== start) {\n        this.setState({\n          packedEvents: populateEvents(events, width, start)\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.scrollToFirst && this.scrollToFirst();\n    }\n  }, {\n    key: \"scrollToFirst\",\n    value: function scrollToFirst() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        if (_this2.state && _this2.state._scrollY && _this2.scrollView) {\n          var _this2$scrollView, _this2$scrollView$cur;\n\n          (_this2$scrollView = _this2.scrollView) == null ? void 0 : (_this2$scrollView$cur = _this2$scrollView.current) == null ? void 0 : _this2$scrollView$cur.scrollTo({\n            x: 0,\n            y: _this2.state._scrollY,\n            animated: true\n          });\n        }\n      }, 1);\n    }\n  }, {\n    key: \"_renderLines\",\n    value: function _renderLines() {\n      var _this3 = this;\n\n      var _this$props3 = this.props,\n          format24h = _this$props3.format24h,\n          _this$props3$start = _this$props3.start,\n          start = _this$props3$start === void 0 ? 0 : _this$props3$start,\n          _this$props3$end = _this$props3.end,\n          end = _this$props3$end === void 0 ? 24 : _this$props3$end;\n      var offset = this.calendarHeight / (end - start);\n      var EVENT_DIFF = 20;\n      return range(start, end + 1).map(function (i, index) {\n        var timeText;\n\n        if (i === start) {\n          timeText = '';\n        } else if (i < 12) {\n          timeText = !format24h ? i + \" AM\" : i + \":00\";\n        } else if (i === 12) {\n          timeText = !format24h ? i + \" PM\" : i + \":00\";\n        } else if (i === 24) {\n          timeText = !format24h ? '12 AM' : '23:59';\n        } else {\n          timeText = !format24h ? i - 12 + \" PM\" : i + \":00\";\n        }\n\n        return [React.createElement(Text, {\n          key: \"timeLabel\" + i,\n          style: [_this3.style.timeLabel, {\n            top: offset * index - 6\n          }],\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 17\n          }\n        }, timeText), i === start ? null : React.createElement(View, {\n          key: \"line\" + i,\n          style: [_this3.style.line, {\n            top: offset * index,\n            width: dimensionWidth - EVENT_DIFF\n          }],\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 39\n          }\n        }), React.createElement(View, {\n          key: \"lineHalf\" + i,\n          style: [_this3.style.line, {\n            top: offset * (index + 0.5),\n            width: dimensionWidth - EVENT_DIFF\n          }],\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 17\n          }\n        })];\n      });\n    }\n  }, {\n    key: \"_onEventPress\",\n    value: function _onEventPress(event) {\n      if (this.props.eventTapped) {\n        this.props.eventTapped(event);\n      } else {\n        _.invoke(this.props, 'onEventPress', event);\n      }\n    }\n  }, {\n    key: \"_renderEvents\",\n    value: function _renderEvents() {\n      var _this4 = this;\n\n      var packedEvents = this.state.packedEvents;\n      var events = packedEvents.map(function (event, i) {\n        var style = {\n          left: event.left,\n          height: event.height,\n          width: event.width,\n          top: event.top,\n          backgroundColor: event.color ? event.color : '#add8e6'\n        };\n        var numberOfLines = Math.floor(event.height / TEXT_LINE_HEIGHT);\n        var formatTime = _this4.props.format24h ? 'HH:mm' : 'hh:mm A';\n        return React.createElement(TouchableOpacity, {\n          activeOpacity: 0.9,\n          onPress: function onPress() {\n            return _this4._onEventPress(_this4.props.events[event.index]);\n          },\n          key: i,\n          style: [_this4.style.event, style],\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 21\n          }\n        }, _this4.props.renderEvent ? _this4.props.renderEvent(event) : React.createElement(View, {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 72\n          }\n        }, React.createElement(Text, {\n          numberOfLines: 1,\n          style: _this4.style.eventTitle,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 15\n          }\n        }, event.title || 'Event'), numberOfLines > 1 ? React.createElement(Text, {\n          numberOfLines: numberOfLines - 1,\n          style: [_this4.style.eventSummary],\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 37\n          }\n        }, event.summary || ' ') : null, numberOfLines > 2 ? React.createElement(Text, {\n          style: _this4.style.eventTimes,\n          numberOfLines: 1,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 37\n          }\n        }, new XDate(event.start).toString(formatTime), \" - \", new XDate(event.end).toString(formatTime)) : null));\n      });\n      return React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: {\n          marginLeft: LEFT_MARGIN\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 9\n        }\n      }, events));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ScrollView, {\n        ref: this.scrollView,\n        contentContainerStyle: [this.style.contentStyle, {\n          width: dimensionWidth\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 17\n        }\n      }, this._renderLines(), this._renderEvents());\n    }\n  }]);\n\n  return Timeline;\n}(Component);\n\nTimeline.propTypes = {\n  start: PropTypes.number,\n  end: PropTypes.number,\n  eventTapped: PropTypes.func,\n  onEventPress: PropTypes.func,\n  format24h: PropTypes.bool,\n  events: PropTypes.arrayOf(PropTypes.shape({\n    start: PropTypes.string.isRequired,\n    end: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n    summary: PropTypes.string.isRequired,\n    color: PropTypes.string\n  })).isRequired\n};\nTimeline.defaultProps = {\n  start: 0,\n  end: 24,\n  events: [],\n  format24h: true\n};\nexport { Timeline as default };","map":{"version":3,"sources":["/app/node_modules/react-native-calendars/src/timeline/Timeline.js"],"names":["_","PropTypes","XDate","React","Component","styleConstructor","populateEvents","LEFT_MARGIN","TEXT_LINE_HEIGHT","range","from","to","Array","i","Dimensions","get","dimensionWidth","width","Timeline","props","scrollView","createRef","start","end","calendarHeight","style","theme","styles","packedEvents","events","initPosition","min","map","verifiedInitPosition","state","_scrollY","prevProps","prevEvents","prevStart","setState","scrollToFirst","setTimeout","current","scrollTo","x","y","animated","format24h","offset","EVENT_DIFF","index","timeText","timeLabel","top","line","event","eventTapped","invoke","left","height","backgroundColor","color","numberOfLines","Math","floor","formatTime","_onEventPress","renderEvent","eventTitle","title","eventSummary","summary","eventTimes","toString","marginLeft","contentStyle","_renderLines","_renderEvents","propTypes","number","func","onEventPress","bool","arrayOf","shape","string","isRequired","defaultProps"],"mappings":"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","sourcesContent":["// @flow\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport React, { Component } from 'react';\nimport { View, Text, TouchableOpacity, Dimensions, ScrollView } from 'react-native';\nimport styleConstructor from './style';\nimport populateEvents from './Packer';\nconst LEFT_MARGIN = 60 - 1;\nconst TEXT_LINE_HEIGHT = 17;\nfunction range(from, to) {\n    return Array.from(Array(to), (_, i) => from + i);\n}\nlet { width: dimensionWidth } = Dimensions.get('window');\nexport default class Timeline extends Component {\n    static propTypes = {\n        start: PropTypes.number,\n        end: PropTypes.number,\n        eventTapped: PropTypes.func,\n        onEventPress: PropTypes.func,\n        format24h: PropTypes.bool,\n        events: PropTypes.arrayOf(PropTypes.shape({\n            start: PropTypes.string.isRequired,\n            end: PropTypes.string.isRequired,\n            title: PropTypes.string.isRequired,\n            summary: PropTypes.string.isRequired,\n            color: PropTypes.string\n        })).isRequired\n    };\n    static defaultProps = {\n        start: 0,\n        end: 24,\n        events: [],\n        format24h: true\n    };\n    scrollView = React.createRef();\n    style;\n    calendarHeight;\n    constructor(props) {\n        super(props);\n        const { start = 0, end = 0 } = this.props;\n        this.calendarHeight = (end - start) * 100;\n        this.style = styleConstructor(props.theme || props.styles, this.calendarHeight);\n        const width = dimensionWidth - LEFT_MARGIN;\n        const packedEvents = populateEvents(props.events, width, start);\n        let initPosition = _.min(_.map(packedEvents, 'top')) - this.calendarHeight / (end - start);\n        const verifiedInitPosition = initPosition < 0 ? 0 : initPosition;\n        this.state = {\n            _scrollY: verifiedInitPosition,\n            packedEvents\n        };\n    }\n    componentDidUpdate(prevProps) {\n        const width = dimensionWidth - LEFT_MARGIN;\n        const { events: prevEvents, start: prevStart = 0 } = prevProps;\n        const { events, start = 0 } = this.props;\n        if (prevEvents !== events || prevStart !== start) {\n            this.setState({\n                packedEvents: populateEvents(events, width, start)\n            });\n        }\n    }\n    componentDidMount() {\n        this.props.scrollToFirst && this.scrollToFirst();\n    }\n    scrollToFirst() {\n        setTimeout(() => {\n            if (this.state && this.state._scrollY && this.scrollView) {\n                this.scrollView?.current?.scrollTo({\n                    x: 0,\n                    y: this.state._scrollY,\n                    animated: true\n                });\n            }\n        }, 1);\n    }\n    _renderLines() {\n        const { format24h, start = 0, end = 24 } = this.props;\n        const offset = this.calendarHeight / (end - start);\n        const EVENT_DIFF = 20;\n        return range(start, end + 1).map((i, index) => {\n            let timeText;\n            if (i === start) {\n                timeText = '';\n            }\n            else if (i < 12) {\n                timeText = !format24h ? `${i} AM` : `${i}:00`;\n            }\n            else if (i === 12) {\n                timeText = !format24h ? `${i} PM` : `${i}:00`;\n            }\n            else if (i === 24) {\n                timeText = !format24h ? '12 AM' : '23:59';\n            }\n            else {\n                timeText = !format24h ? `${i - 12} PM` : `${i}:00`;\n            }\n            return [\n                <Text key={`timeLabel${i}`} style={[this.style.timeLabel, { top: offset * index - 6 }]}>\n          {timeText}\n        </Text>,\n                i === start ? null : (<View key={`line${i}`} style={[this.style.line, { top: offset * index, width: dimensionWidth - EVENT_DIFF }]}/>),\n                <View key={`lineHalf${i}`} style={[this.style.line, { top: offset * (index + 0.5), width: dimensionWidth - EVENT_DIFF }]}/>\n            ];\n        });\n    }\n    _onEventPress(event) {\n        if (this.props.eventTapped) { //TODO: remove after deprecation\n            this.props.eventTapped(event);\n        }\n        else {\n            _.invoke(this.props, 'onEventPress', event);\n        }\n    }\n    _renderEvents() {\n        const { packedEvents } = this.state;\n        let events = packedEvents.map((event, i) => {\n            const style = {\n                left: event.left,\n                height: event.height,\n                width: event.width,\n                top: event.top,\n                backgroundColor: event.color ? event.color : '#add8e6'\n            };\n            // Fixing the number of lines for the event title makes this calculation easier.\n            // However it would make sense to overflow the title to a new line if needed\n            const numberOfLines = Math.floor(event.height / TEXT_LINE_HEIGHT);\n            const formatTime = this.props.format24h ? 'HH:mm' : 'hh:mm A';\n            return (<TouchableOpacity activeOpacity={0.9} onPress={() => this._onEventPress(this.props.events[event.index])} key={i} style={[this.style.event, style]}>\n          {this.props.renderEvent ? (this.props.renderEvent(event)) : (<View>\n              <Text numberOfLines={1} style={this.style.eventTitle}>\n                {event.title || 'Event'}\n              </Text>\n              {numberOfLines > 1 ? (<Text numberOfLines={numberOfLines - 1} style={[this.style.eventSummary]}>\n                  {event.summary || ' '}\n                </Text>) : null}\n              {numberOfLines > 2 ? (<Text style={this.style.eventTimes} numberOfLines={1}>\n                  {new XDate(event.start).toString(formatTime)} - {new XDate(event.end).toString(formatTime)}\n                </Text>) : null}\n            </View>)}\n        </TouchableOpacity>);\n        });\n        return (<View>\n        <View style={{ marginLeft: LEFT_MARGIN }}>{events}</View>\n      </View>);\n    }\n    render() {\n        return (<ScrollView ref={this.scrollView} contentContainerStyle={[this.style.contentStyle, { width: dimensionWidth }]}>\n        {this._renderLines()}\n        {this._renderEvents()}\n      </ScrollView>);\n    }\n}\n"]},"metadata":{},"sourceType":"module"}